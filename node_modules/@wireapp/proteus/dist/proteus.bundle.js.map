{"version":3,"sources":["webpack://Proteus/webpack/bootstrap","webpack://Proteus/./dist/util/ClassUtil.js","webpack://Proteus/external \"sodium\"","webpack://Proteus/./dist/errors/InputError.js","webpack://Proteus/./dist/keys/PublicKey.js","webpack://Proteus/./dist/errors/ProteusError.js","webpack://Proteus/external \"CBOR\"","webpack://Proteus/./dist/keys/KeyPair.js","webpack://Proteus/./dist/util/MemoryUtil.js","webpack://Proteus/./dist/keys/IdentityKey.js","webpack://Proteus/./dist/message/CipherMessage.js","webpack://Proteus/./dist/session/ChainKey.js","webpack://Proteus/./dist/derived/CipherKey.js","webpack://Proteus/./dist/derived/DerivedSecrets.js","webpack://Proteus/./dist/util/ArrayUtil.js","webpack://Proteus/./dist/derived/MacKey.js","webpack://Proteus/./dist/errors/DecodeError.js","webpack://Proteus/./dist/errors/DecryptError.js","webpack://Proteus/./dist/message/Message.js","webpack://Proteus/./dist/message/PreKeyMessage.js","webpack://Proteus//home/travis/build/wireapp/wire-web-packages/node_modules/ed2curve/ed2curve.js","webpack://Proteus/./dist/keys/SecretKey.js","webpack://Proteus/./dist/message/SessionTag.js","webpack://Proteus/./dist/session/MessageKeys.js","webpack://Proteus/./dist/util/KeyDerivationUtil.js","webpack://Proteus/./dist/keys/IdentityKeyPair.js","webpack://Proteus/./dist/keys/PreKey.js","webpack://Proteus/./dist/keys/PreKeyAuth.js","webpack://Proteus/./dist/util/RandomUtil.js","webpack://Proteus/./dist/message/Envelope.js","webpack://Proteus/./dist/session/RecvChain.js","webpack://Proteus/./dist/session/RootKey.js","webpack://Proteus/./dist/session/SendChain.js","webpack://Proteus/./dist/session/Session.js","webpack://Proteus/./dist/session/SessionState.js","webpack://Proteus/./dist/index.js","webpack://Proteus/./dist/derived/index.js","webpack://Proteus/./dist/errors/index.js","webpack://Proteus/./dist/keys/index.js","webpack://Proteus//home/travis/build/wireapp/wire-web-packages/node_modules/ed2curve/node_modules/tweetnacl/nacl-fast.js","webpack://Proteus/./dist/keys/PreKeyBundle.js","webpack://Proteus/./dist/message/index.js","webpack://Proteus/./dist/session/index.js","webpack://Proteus/./dist/session/PreKeyStore.js","webpack://Proteus/./dist/util/index.js","webpack://Proteus/./dist/util/WASMUtil.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","new_instance","proposedClass","error","_instance","sodium","ProteusError_1","InputError","ProteusError","message","code","super","setPrototypeOf","this","CODE","CASE_400","CASE_401","CASE_402","CASE_403","CASE_404","CASE_405","CASE_406","CASE_407","CASE_408","CASE_409","RangeError","TypeError","ConversionError","ed2curve","InputError_1","ClassUtil","PublicKey","pub_edward","Uint8Array","pub_curve","pk","signature","crypto_sign_verify_detached","to_hex","encoder","u8","bytes","decoder","self","nprops","index","skip","convertPublicKey","Error","CASE_100","CASE_101","CASE_102","CASE_103","CASE_104","CBOR","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","_sodium","PublicKey_1","SecretKey_1","KeyPair","public_key","secret_key","SecretKey","ready","ed25519_key_pair","crypto_sign_keypair","kp","_construct_private_key","_construct_public_key","sk_ed25519","privateKey","sk_curve25519","convertSecretKey","new","pk_ed25519","publicKey","pk_curve25519","encode","decode","zeroize","memzero","ArrayBuffer","keys","map","forEach","val","IdentityKey","fingerprint","Message_1","SessionTag_1","CipherMessage","Message","cipher_text","counter","prev_counter","ratchet_key","session_tag","SessionTag","cm","freeze","u32","Number","isNaN","DerivedSecrets_1","MacKey_1","MessageKeys_1","ChainKey","idx","MacKey","ck","sign","base","derived_secrets","DerivedSecrets","kdf_without_salt","MessageKeys","cipher_key","mac_key","CipherKey","plaintext","nonce","undefined","byteLength","crypto_stream_chacha20_xor","ciphertext","encrypt","key_bytes","KeyDerivationUtil","MemoryUtil","CipherKey_1","input","salt","info","output_key_material","hkdf","buffer","slice","ds","kdf","assert_is_not_zeros","array","only_zeros","concatenate_array_buffers","buffers","reduce","accumulator","set","msg","crypto_auth_hmacsha256","crypto_auth_hmacsha256_verify","DecodeError","CASE_300","CASE_301","CASE_302","CASE_303","InvalidType","InvalidArrayLen","LocalIdentityChanged","DecryptError","CASE_200","CASE_201","CASE_202","CASE_203","CASE_204","CASE_205","CASE_206","CASE_207","CASE_208","CASE_209","CASE_210","CASE_211","CASE_212","CASE_213","DuplicateMessage","InvalidMessage","InvalidSignature","OutdatedMessage","PrekeyNotFound","RemoteIdentityChanged","RemoteEncryptionError","TooDistantFuture","DecodeError_1","Encoder","CipherMessage_1","PreKeyMessage_1","PreKeyMessage","get_buffer","buf","Decoder","IdentityKey_1","base_key","identity_key","prekey_id","pkm","u16","root","f","nacl","gf","init","Float64Array","length","gf0","gf1","D","I","car25519","Math","floor","sel25519","q","b","A","a","Z","M","j","S","pack25519","neq25519","x","xi","y","yi","vn","unpackneg","chk","num","den","den2","den4","den6","set25519","unpack25519","pow2523","z","inv25519","sk","lowlevel","crypto_hash","convertKeyPair","edKeyPair","secretKey","ArrayUtil","sec_curve","sec_edward","crypto_sign_detached","shared_secret","crypto_scalarmult","RandomUtil","tag","st","random_bytes","mk","DataView","setUint32","_counter_as_nonce","decrypt","convert_type","from_string","received_salt","received_input","keybytes","crypto_auth_hmacsha256_KEYBYTES","crypto_hash_sha256","salt_to_key","extract","received_info","received_length","num_blocks","ceil","hmac","expand","KeyPair_1","IdentityKeyPair","version","key_pair","ikp","PreKey","key_id","pre_key_id","validate_pre_key_id","MAX_PREKEY_ID","start","size","all","Array","from","_","PreKeyAuth","INVALID","UNKNOWN","VALID","window","crypto","buffer_view","getRandomValues","randomBytes","Envelope","_message_enc","mac","serialized_message","serialise","env","verify","nprops_mac","subindex","deserialise","DecryptError_1","ChainKey_1","RecvChain","chain_key","message_keys","rc","envelope","_a","findIndex","splice","MAX_COUNTER_GAP","push","excess","shift","len","RootKey","rk","ours","theirs","secret","from_cipher_key","from_mac_key","SendChain","keypair","sc","SessionState_1","IdentityKeyPair_1","PreKey_1","Session","local_identity","pending_prekey","remote_identity","session_states","remote_pkbundle","alice_base","state","SessionState","init_as_alice","session","_insert_session_state","our_identity","prekey_store","preKeyMessage","_new_state","plain","load_prekey","delete_prekey","pre_key_store","pre_key_message","pre_key","init_as_bob","constructor","toString","MAX_SAFE_INTEGER","obj","obj_size","MAX_SESSION_STATES","_evict_oldest_session_state","oldest","filter","lowest","session_state","_decrypt_cipher_message","actual_fingerprint","expected_fingerprint","_decrypt_prekey_message","null","optional","MAX_RECV_CHAINS","Envelope_1","RecvChain_1","RootKey_1","SendChain_1","Session_1","recv_chains","root_key","send_chain","alice_identity_pair","bob_pkbundle","master_key","rootkey","chainkey","send_ratchet","rok","dh_ratchet","bob_ident","bob_prekey","alice_ident","new_ratchet","recv_root_key","recv_chain_key","send_root_key","send_chain_key","recv_chain","unshift","pending","msgkeys","chain","ratchet","try_message_keys","mks","stage_message_keys","commit_message_keys","rch","derived","errors","util","__export","PreKeyAuth_1","PreKeyBundle_1","PreKeyBundle","randombytes","_0","_9","_121665","D2","X","Y","ts64","h","crypto_verify_16","crypto_verify_32","crypto_core_salsa20","out","inp","k","u","j0","j1","j2","j3","j4","j5","j6","j7","j8","j9","j10","j11","j12","j13","j14","j15","x0","x1","x2","x3","x4","x5","x6","x7","x8","x9","x10","x11","x12","x13","x14","x15","core_salsa20","crypto_core_hsalsa20","core_hsalsa20","sigma","crypto_stream_salsa20_xor","cpos","mpos","crypto_stream_salsa20","crypto_stream","sn","crypto_stream_xor","poly1305","t0","t1","t2","t3","t4","t5","t6","t7","Uint16Array","pad","leftover","fin","crypto_onetimeauth","outpos","update","finish","crypto_onetimeauth_verify","hpos","crypto_secretbox","crypto_secretbox_open","v","par25519","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19","t20","t21","t22","t23","t24","t25","t26","t27","t28","t29","t30","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b14","b15","x32","subarray","x16","crypto_scalarmult_base","crypto_box_keypair","crypto_box_beforenm","blocks","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","hibit","h0","h1","h2","h3","h4","h5","h6","h7","h8","h9","r0","r1","r2","r3","r4","r5","r6","r7","r8","r9","macpos","mask","g","want","crypto_box_afternm","crypto_box_open_afternm","K","crypto_hashblocks_hl","hh","hl","bh0","bh1","bh2","bh3","bh4","bh5","bh6","bh7","bl0","bl1","bl2","bl3","bl4","bl5","bl6","bl7","th","tl","wh","Int32Array","wl","ah0","ah1","ah2","ah3","ah4","ah5","ah6","ah7","al0","al1","al2","al3","al4","al5","al6","al7","pos","add","cswap","pack","tx","ty","zi","scalarmult","scalarbase","seeded","L","modL","carry","crypto_sign","sm","smlen","crypto_sign_open","crypto_secretbox_KEYBYTES","crypto_secretbox_NONCEBYTES","crypto_box_PUBLICKEYBYTES","crypto_box_SECRETKEYBYTES","crypto_box_NONCEBYTES","checkLengths","checkArrayTypes","arguments","cleanup","arr","crypto_box","crypto_box_open","crypto_secretbox_ZEROBYTES","crypto_secretbox_BOXZEROBYTES","crypto_scalarmult_BYTES","crypto_scalarmult_SCALARBYTES","crypto_box_BEFORENMBYTES","crypto_box_ZEROBYTES","crypto_box_BOXZEROBYTES","crypto_sign_BYTES","crypto_sign_PUBLICKEYBYTES","crypto_sign_SECRETKEYBYTES","crypto_sign_SEEDBYTES","crypto_hash_BYTES","secretbox","open","box","keyLength","nonceLength","overheadLength","scalarMult","scalarLength","groupElementLength","before","checkBoxLengths","after","keyPair","fromSecretKey","publicKeyLength","secretKeyLength","sharedKeyLength","signedMsg","tmp","mlen","detached","sig","fromSeed","seed","seedLength","signatureLength","hash","hashLength","setPRNG","fn","msCrypto","min","public_identity_key","prekey","bundle","identity_pair","id","to_base64","base64_variants","ORIGINAL","PreKeyStore","WASMUtil","isUsingWASM","rawLibsodium","libsodium","Boolean","usesWasm","useBackupModule"],"mappings":"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","file":"proteus.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 34);\n","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction new_instance(proposedClass) {\n    try {\n        const newClass = new proposedClass();\n        return newClass;\n    }\n    catch (error) {\n        return error._instance;\n    }\n}\nexports.new_instance = new_instance;\n//# sourceMappingURL=ClassUtil.js.map","module.exports = sodium;","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ProteusError_1 = require(\"./ProteusError\");\nclass InputError extends ProteusError_1.ProteusError {\n    constructor(message = 'Invalid input', code = 4) {\n        super(message, code);\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n}\nexports.InputError = InputError;\nInputError.CODE = {\n    CASE_400: 400,\n    CASE_401: 401,\n    CASE_402: 402,\n    CASE_403: 403,\n    CASE_404: 404,\n    CASE_405: 405,\n    CASE_406: 406,\n    CASE_407: 407,\n    CASE_408: 408,\n    CASE_409: 409,\n};\n(function (InputError) {\n    class RangeError extends InputError {\n        constructor(message = 'Invalid array length', code) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    InputError.RangeError = RangeError;\n    class TypeError extends InputError {\n        constructor(message = 'Invalid type', code) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    InputError.TypeError = TypeError;\n    class ConversionError extends InputError {\n        constructor(message = 'Conversion error', code) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    InputError.ConversionError = ConversionError;\n})(InputError = exports.InputError || (exports.InputError = {}));\n//# sourceMappingURL=InputError.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ed2curve = require(\"ed2curve\");\nconst sodium = require(\"libsodium-wrappers-sumo\");\nconst InputError_1 = require(\"../errors/InputError\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nclass PublicKey {\n    constructor() {\n        this.pub_edward = new Uint8Array([]);\n        this.pub_curve = new Uint8Array([]);\n    }\n    static new(pub_edward, pub_curve) {\n        const pk = ClassUtil.new_instance(PublicKey);\n        pk.pub_edward = pub_edward;\n        pk.pub_curve = pub_curve;\n        return pk;\n    }\n    /**\n     * This function can be used to verify a message signature.\n     *\n     * @param signature The signature to verify\n     * @param message The message from which the signature was computed.\n     * @returns `true` if the signature is valid, `false` otherwise.\n     */\n    verify(signature, message) {\n        return sodium.crypto_sign_verify_detached(signature, message, this.pub_edward);\n    }\n    fingerprint() {\n        return sodium.to_hex(this.pub_edward);\n    }\n    encode(encoder) {\n        encoder.object(1);\n        encoder.u8(0);\n        return encoder.bytes(this.pub_edward);\n    }\n    static decode(decoder) {\n        const self = ClassUtil.new_instance(PublicKey);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    self.pub_edward = new Uint8Array(decoder.bytes());\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        const pub_curve = ed2curve.convertPublicKey(self.pub_edward);\n        if (pub_curve) {\n            self.pub_curve = pub_curve;\n            return self;\n        }\n        throw new InputError_1.InputError.ConversionError('Could not convert private key with ed2curve.', 409);\n    }\n}\nexports.PublicKey = PublicKey;\n//# sourceMappingURL=PublicKey.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ProteusError extends Error {\n    constructor(message, code = 1) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n}\nexports.ProteusError = ProteusError;\nProteusError.CODE = {\n    CASE_100: 100,\n    CASE_101: 101,\n    CASE_102: 102,\n    CASE_103: 103,\n    CASE_104: 104,\n};\n//# sourceMappingURL=ProteusError.js.map","module.exports = CBOR;","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ed2curve = require(\"ed2curve\");\nconst _sodium = require(\"libsodium-wrappers-sumo\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst PublicKey_1 = require(\"./PublicKey\");\nconst SecretKey_1 = require(\"./SecretKey\");\nconst InputError_1 = require(\"../errors/InputError\");\n/** Construct an ephemeral key pair. */\nclass KeyPair {\n    constructor() {\n        this.public_key = new PublicKey_1.PublicKey();\n        this.secret_key = new SecretKey_1.SecretKey();\n    }\n    static new() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield _sodium.ready;\n            const sodium = _sodium;\n            const ed25519_key_pair = sodium.crypto_sign_keypair();\n            const kp = ClassUtil.new_instance(KeyPair);\n            kp.secret_key = KeyPair.prototype._construct_private_key(ed25519_key_pair);\n            kp.public_key = KeyPair.prototype._construct_public_key(ed25519_key_pair);\n            return kp;\n        });\n    }\n    /**\n     * Ed25519 keys can be converted to Curve25519 keys, so that the same key pair can be\n     * used both for authenticated encryption (`crypto_box`) and for signatures (`crypto_sign`).\n     * @param ed25519_key_pair Key pair based on Edwards-curve (Ed25519)\n     * @returns Constructed private key\n     * @see https://download.libsodium.org/doc/advanced/ed25519-curve25519.html\n     */\n    _construct_private_key(ed25519_key_pair) {\n        const sk_ed25519 = ed25519_key_pair.privateKey;\n        const sk_curve25519 = ed2curve.convertSecretKey(sk_ed25519);\n        if (sk_curve25519) {\n            return SecretKey_1.SecretKey.new(sk_ed25519, sk_curve25519);\n        }\n        throw new InputError_1.InputError.ConversionError('Could not convert private key with ed2curve.', 409);\n    }\n    /**\n     * @param ed25519_key_pair Key pair based on Edwards-curve (Ed25519)\n     * @returns Constructed public key\n     */\n    _construct_public_key(ed25519_key_pair) {\n        const pk_ed25519 = ed25519_key_pair.publicKey;\n        const pk_curve25519 = ed2curve.convertPublicKey(pk_ed25519);\n        if (pk_curve25519) {\n            return PublicKey_1.PublicKey.new(pk_ed25519, pk_curve25519);\n        }\n        throw new InputError_1.InputError.ConversionError('Could not convert public key with ed2curve.', 408);\n    }\n    encode(encoder) {\n        encoder.object(2);\n        encoder.u8(0);\n        this.secret_key.encode(encoder);\n        encoder.u8(1);\n        return this.public_key.encode(encoder);\n    }\n    static decode(decoder) {\n        const self = ClassUtil.new_instance(KeyPair);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    self.secret_key = SecretKey_1.SecretKey.decode(decoder);\n                    break;\n                case 1:\n                    self.public_key = PublicKey_1.PublicKey.decode(decoder);\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        return self;\n    }\n}\nexports.KeyPair = KeyPair;\n//# sourceMappingURL=KeyPair.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sodium = require(\"libsodium-wrappers-sumo\");\nfunction zeroize(object) {\n    if (object instanceof Uint8Array) {\n        sodium.memzero(object);\n    }\n    else if (object instanceof ArrayBuffer) {\n        sodium.memzero(new Uint8Array(object));\n    }\n    else if (typeof object === 'object') {\n        Object.keys(object)\n            .map(key => object[key])\n            .forEach(val => zeroize(val));\n    }\n}\nexports.zeroize = zeroize;\n//# sourceMappingURL=MemoryUtil.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst PublicKey_1 = require(\"./PublicKey\");\n/**\n * Construct a long-term identity key pair.\n *\n * Every client has a long-term identity key pair.\n * Long-term identity keys are used to initialise \"sessions\" with other clients (triple DH).\n */\nclass IdentityKey {\n    constructor() {\n        this.public_key = new PublicKey_1.PublicKey();\n    }\n    static new(public_key) {\n        const key = ClassUtil.new_instance(IdentityKey);\n        key.public_key = public_key;\n        return key;\n    }\n    fingerprint() {\n        return this.public_key.fingerprint();\n    }\n    encode(encoder) {\n        encoder.object(1);\n        encoder.u8(0);\n        return this.public_key.encode(encoder);\n    }\n    static decode(decoder) {\n        let public_key = ClassUtil.new_instance(PublicKey_1.PublicKey);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    public_key = PublicKey_1.PublicKey.decode(decoder);\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        return IdentityKey.new(public_key);\n    }\n}\nexports.IdentityKey = IdentityKey;\n//# sourceMappingURL=IdentityKey.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst InputError_1 = require(\"../errors/InputError\");\nconst PublicKey_1 = require(\"../keys/PublicKey\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst Message_1 = require(\"./Message\");\nconst SessionTag_1 = require(\"./SessionTag\");\nclass CipherMessage extends Message_1.Message {\n    constructor() {\n        super();\n        this.cipher_text = new Uint8Array([]);\n        this.counter = -1;\n        this.prev_counter = -1;\n        this.ratchet_key = new PublicKey_1.PublicKey();\n        this.session_tag = new SessionTag_1.SessionTag();\n    }\n    static new(session_tag, counter, prev_counter, ratchet_key, cipher_text) {\n        const cm = ClassUtil.new_instance(CipherMessage);\n        cm.session_tag = session_tag;\n        cm.counter = counter;\n        cm.prev_counter = prev_counter;\n        cm.ratchet_key = ratchet_key;\n        cm.cipher_text = cipher_text;\n        Object.freeze(cm);\n        return cm;\n    }\n    encode(encoder) {\n        encoder.object(5);\n        encoder.u8(0);\n        this.session_tag.encode(encoder);\n        encoder.u8(1);\n        encoder.u32(this.counter);\n        encoder.u8(2);\n        encoder.u32(this.prev_counter);\n        encoder.u8(3);\n        this.ratchet_key.encode(encoder);\n        encoder.u8(4);\n        return encoder.bytes(this.cipher_text);\n    }\n    static decode(decoder) {\n        let session_tag = null;\n        let counter = null;\n        let prev_counter = null;\n        let ratchet_key = null;\n        let cipher_text = null;\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    session_tag = SessionTag_1.SessionTag.decode(decoder);\n                    break;\n                case 1:\n                    counter = decoder.u32();\n                    break;\n                case 2:\n                    prev_counter = decoder.u32();\n                    break;\n                case 3:\n                    ratchet_key = PublicKey_1.PublicKey.decode(decoder);\n                    break;\n                case 4:\n                    cipher_text = new Uint8Array(decoder.bytes());\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        counter = Number(counter);\n        prev_counter = Number(prev_counter);\n        if (session_tag && !isNaN(counter) && !isNaN(prev_counter) && ratchet_key && cipher_text) {\n            return CipherMessage.new(session_tag, counter, prev_counter, ratchet_key, cipher_text);\n        }\n        throw new InputError_1.InputError.TypeError(`Given CipherMessage doesn't match expected signature.`, InputError_1.InputError.CODE.CASE_405);\n    }\n}\nexports.CipherMessage = CipherMessage;\n//# sourceMappingURL=CipherMessage.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DerivedSecrets_1 = require(\"../derived/DerivedSecrets\");\nconst MacKey_1 = require(\"../derived/MacKey\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst MessageKeys_1 = require(\"./MessageKeys\");\nclass ChainKey {\n    constructor() {\n        this.idx = -1;\n        this.key = new MacKey_1.MacKey(new Uint8Array([]));\n    }\n    static from_mac_key(key, counter) {\n        const ck = ClassUtil.new_instance(ChainKey);\n        ck.key = key;\n        ck.idx = counter;\n        return ck;\n    }\n    next() {\n        const ck = ClassUtil.new_instance(ChainKey);\n        ck.key = new MacKey_1.MacKey(this.key.sign('1'));\n        ck.idx = this.idx + 1;\n        return ck;\n    }\n    message_keys() {\n        const base = this.key.sign('0');\n        const derived_secrets = DerivedSecrets_1.DerivedSecrets.kdf_without_salt(base, 'hash_ratchet');\n        return MessageKeys_1.MessageKeys.new(derived_secrets.cipher_key, derived_secrets.mac_key, this.idx);\n    }\n    encode(encoder) {\n        encoder.object(2);\n        encoder.u8(0);\n        this.key.encode(encoder);\n        encoder.u8(1);\n        return encoder.u32(this.idx);\n    }\n    static decode(decoder) {\n        const self = ClassUtil.new_instance(ChainKey);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    self.key = MacKey_1.MacKey.decode(decoder);\n                    break;\n                case 1:\n                    self.idx = decoder.u32();\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        return self;\n    }\n}\nexports.ChainKey = ChainKey;\n//# sourceMappingURL=ChainKey.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sodium = require(\"libsodium-wrappers-sumo\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nclass CipherKey {\n    constructor() {\n        this.key = new Uint8Array([]);\n    }\n    static new(key) {\n        const ck = ClassUtil.new_instance(CipherKey);\n        ck.key = key;\n        return ck;\n    }\n    /**\n     * @param plaintext The text to encrypt\n     * @param nonce Counter as nonce\n     * @returns Encrypted payload\n     */\n    encrypt(plaintext, nonce) {\n        // TODO: Re-validate if the ArrayBuffer check is needed (Prerequisite: Integration tests)\n        if (plaintext instanceof ArrayBuffer && plaintext.byteLength !== undefined) {\n            plaintext = new Uint8Array(plaintext);\n        }\n        return sodium.crypto_stream_chacha20_xor(plaintext, nonce, this.key, 'uint8array');\n    }\n    decrypt(ciphertext, nonce) {\n        return this.encrypt(ciphertext, nonce);\n    }\n    encode(encoder) {\n        encoder.object(1);\n        encoder.u8(0);\n        return encoder.bytes(this.key);\n    }\n    static decode(decoder) {\n        let key_bytes = new Uint8Array([]);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    key_bytes = new Uint8Array(decoder.bytes());\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        return CipherKey.new(key_bytes);\n    }\n}\nexports.CipherKey = CipherKey;\n//# sourceMappingURL=CipherKey.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst KeyDerivationUtil = require(\"../util/KeyDerivationUtil\");\nconst MemoryUtil = require(\"../util/MemoryUtil\");\nconst CipherKey_1 = require(\"./CipherKey\");\nconst MacKey_1 = require(\"./MacKey\");\nclass DerivedSecrets {\n    constructor() {\n        this.cipher_key = new CipherKey_1.CipherKey();\n        this.mac_key = new MacKey_1.MacKey(new Uint8Array([]));\n    }\n    static kdf(input, salt, info) {\n        const byte_length = 64;\n        const output_key_material = KeyDerivationUtil.hkdf(salt, input, info, byte_length);\n        const cipher_key = new Uint8Array(output_key_material.buffer.slice(0, 32));\n        const mac_key = new Uint8Array(output_key_material.buffer.slice(32, 64));\n        MemoryUtil.zeroize(output_key_material.buffer);\n        const ds = ClassUtil.new_instance(DerivedSecrets);\n        ds.cipher_key = CipherKey_1.CipherKey.new(cipher_key);\n        ds.mac_key = new MacKey_1.MacKey(mac_key);\n        return ds;\n    }\n    /**\n     * @param input Initial key material (usually the Master Key) in byte array format\n     * @param info Key Derivation Data\n     */\n    static kdf_without_salt(input, info) {\n        return this.kdf(input, new Uint8Array(0), info);\n    }\n}\nexports.DerivedSecrets = DerivedSecrets;\n//# sourceMappingURL=DerivedSecrets.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ProteusError_1 = require(\"../errors/ProteusError\");\nfunction assert_is_not_zeros(array) {\n    let only_zeros = true;\n    for (const value of array) {\n        if (value > 0) {\n            only_zeros = false;\n            break;\n        }\n    }\n    if (only_zeros === true) {\n        throw new ProteusError_1.ProteusError('Array consists only of zeros', ProteusError_1.ProteusError.CODE.CASE_100);\n    }\n}\nexports.assert_is_not_zeros = assert_is_not_zeros;\n/** Concatenates array buffers (usually 8-bit unsigned). */\nfunction concatenate_array_buffers(buffers) {\n    return buffers.reduce((accumulator, bytes) => {\n        const buffer = new Uint8Array(accumulator.byteLength + bytes.byteLength);\n        buffer.set(accumulator, 0);\n        buffer.set(bytes, accumulator.byteLength);\n        return buffer;\n    });\n}\nexports.concatenate_array_buffers = concatenate_array_buffers;\n//# sourceMappingURL=ArrayUtil.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sodium = require(\"libsodium-wrappers-sumo\");\nclass MacKey {\n    /**\n     * @param key Mac Key in byte array format generated by derived secrets\n     */\n    constructor(key) {\n        this.key = key;\n    }\n    /** Hash-based message authentication code */\n    sign(msg) {\n        return sodium.crypto_auth_hmacsha256(msg, this.key);\n    }\n    /**\n     * Verifies the signature of a given message by resigning it.\n     * @param signature Mac signature (HMAC) which needs to get verified\n     * @param msg Unsigned message\n     */\n    verify(signature, msg) {\n        const verify = sodium.crypto_auth_hmacsha256_verify(signature, msg, this.key);\n        return verify;\n    }\n    encode(encoder) {\n        encoder.object(1);\n        encoder.u8(0);\n        return encoder.bytes(this.key);\n    }\n    static decode(decoder) {\n        let key_bytes = new Uint8Array([]);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    key_bytes = new Uint8Array(decoder.bytes());\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        return new MacKey(key_bytes);\n    }\n}\nexports.MacKey = MacKey;\n//# sourceMappingURL=MacKey.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ProteusError_1 = require(\"./ProteusError\");\nclass DecodeError extends ProteusError_1.ProteusError {\n    constructor(message = 'Unknown decoding error', code = 3) {\n        super(message, code);\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n}\nexports.DecodeError = DecodeError;\nDecodeError.CODE = {\n    CASE_300: 300,\n    CASE_301: 301,\n    CASE_302: 302,\n    CASE_303: 303,\n};\n(function (DecodeError) {\n    class InvalidType extends DecodeError {\n        constructor(message = 'Invalid type', code) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    DecodeError.InvalidType = InvalidType;\n    class InvalidArrayLen extends DecodeError {\n        constructor(message = 'Invalid array length', code) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    DecodeError.InvalidArrayLen = InvalidArrayLen;\n    class LocalIdentityChanged extends DecodeError {\n        constructor(message = 'Local identity changed', code) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    DecodeError.LocalIdentityChanged = LocalIdentityChanged;\n})(DecodeError = exports.DecodeError || (exports.DecodeError = {}));\n//# sourceMappingURL=DecodeError.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ProteusError_1 = require(\"./ProteusError\");\nclass DecryptError extends ProteusError_1.ProteusError {\n    constructor(message = 'Unknown decryption error', code = 2) {\n        super(message, code);\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n}\nexports.DecryptError = DecryptError;\nDecryptError.CODE = {\n    CASE_200: 200,\n    CASE_201: 201,\n    CASE_202: 202,\n    CASE_203: 203,\n    CASE_204: 204,\n    CASE_205: 205,\n    CASE_206: 206,\n    CASE_207: 207,\n    CASE_208: 208,\n    CASE_209: 209,\n    CASE_210: 210,\n    CASE_211: 211,\n    CASE_212: 212,\n    /** REMOTE_ENCRYPTION_FAILURE: Created by the receiver when getting a decryption failure symbol () */\n    CASE_213: 213,\n};\n(function (DecryptError) {\n    class DuplicateMessage extends DecryptError {\n        constructor(message = 'Duplicate message', code = DecryptError.CODE.CASE_209) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    DecryptError.DuplicateMessage = DuplicateMessage;\n    class InvalidMessage extends DecryptError {\n        constructor(message = 'Invalid message', code) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    DecryptError.InvalidMessage = InvalidMessage;\n    class InvalidSignature extends DecryptError {\n        constructor(message = 'Invalid signature', code) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    DecryptError.InvalidSignature = InvalidSignature;\n    class OutdatedMessage extends DecryptError {\n        constructor(message = 'Outdated message', code = DecryptError.CODE.CASE_208) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    DecryptError.OutdatedMessage = OutdatedMessage;\n    class PrekeyNotFound extends DecryptError {\n        constructor(message = 'Pre-key not found', code) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    DecryptError.PrekeyNotFound = PrekeyNotFound;\n    class RemoteIdentityChanged extends DecryptError {\n        constructor(message = 'Remote identity changed', code) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    DecryptError.RemoteIdentityChanged = RemoteIdentityChanged;\n    class RemoteEncryptionError extends DecryptError {\n        constructor(message = 'Sending client failed to encrypt the message', code = DecryptError.CODE.CASE_213) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    DecryptError.RemoteEncryptionError = RemoteEncryptionError;\n    class TooDistantFuture extends DecryptError {\n        constructor(message = 'Message is from too distant in the future', code) {\n            super(message, code);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n    }\n    DecryptError.TooDistantFuture = TooDistantFuture;\n})(DecryptError = exports.DecryptError || (exports.DecryptError = {}));\n//# sourceMappingURL=DecryptError.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CBOR = require(\"@wireapp/cbor\");\nconst DecodeError_1 = require(\"../errors/DecodeError\");\nclass Message {\n    constructor() { }\n    serialise() {\n        const encoder = new CBOR.Encoder();\n        if (this instanceof CipherMessage_1.CipherMessage) {\n            encoder.u8(1);\n        }\n        else if (this instanceof PreKeyMessage_1.PreKeyMessage) {\n            encoder.u8(2);\n        }\n        else {\n            throw new TypeError('Unexpected message type');\n        }\n        this.encode(encoder);\n        return encoder.get_buffer();\n    }\n    static deserialise(buf) {\n        const decoder = new CBOR.Decoder(buf);\n        switch (decoder.u8()) {\n            case 1:\n                return CipherMessage_1.CipherMessage.decode(decoder);\n            case 2:\n                return PreKeyMessage_1.PreKeyMessage.decode(decoder);\n            default:\n                throw new DecodeError_1.DecodeError.InvalidType('Unrecognised message type', DecodeError_1.DecodeError.CODE.CASE_302);\n        }\n    }\n}\nexports.Message = Message;\n// these import statements have to come after the Message definition because otherwise\n// it creates a circular dependency with the message subtypes\nconst CipherMessage_1 = require(\"./CipherMessage\");\nconst PreKeyMessage_1 = require(\"./PreKeyMessage\");\n//# sourceMappingURL=Message.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst IdentityKey_1 = require(\"../keys/IdentityKey\");\nconst PublicKey_1 = require(\"../keys/PublicKey\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst InputError_1 = require(\"../errors/InputError\");\nconst CipherMessage_1 = require(\"./CipherMessage\");\nconst Message_1 = require(\"./Message\");\nclass PreKeyMessage extends Message_1.Message {\n    constructor() {\n        super();\n        this.base_key = new PublicKey_1.PublicKey();\n        this.identity_key = new IdentityKey_1.IdentityKey();\n        this.message = new CipherMessage_1.CipherMessage();\n        this.prekey_id = -1;\n    }\n    static new(prekey_id, base_key, identity_key, message) {\n        const pkm = ClassUtil.new_instance(PreKeyMessage);\n        pkm.prekey_id = prekey_id;\n        pkm.base_key = base_key;\n        pkm.identity_key = identity_key;\n        pkm.message = message;\n        Object.freeze(pkm);\n        return pkm;\n    }\n    encode(encoder) {\n        encoder.object(4);\n        encoder.u8(0);\n        encoder.u16(this.prekey_id);\n        encoder.u8(1);\n        this.base_key.encode(encoder);\n        encoder.u8(2);\n        this.identity_key.encode(encoder);\n        encoder.u8(3);\n        return this.message.encode(encoder);\n    }\n    static decode(decoder) {\n        let prekey_id = null;\n        let base_key = null;\n        let identity_key = null;\n        let message = null;\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    prekey_id = decoder.u16();\n                    break;\n                case 1:\n                    base_key = PublicKey_1.PublicKey.decode(decoder);\n                    break;\n                case 2:\n                    identity_key = IdentityKey_1.IdentityKey.decode(decoder);\n                    break;\n                case 3:\n                    message = CipherMessage_1.CipherMessage.decode(decoder);\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        prekey_id = Number(prekey_id);\n        if (!isNaN(prekey_id) && base_key && identity_key && message) {\n            return PreKeyMessage.new(prekey_id, base_key, identity_key, message);\n        }\n        throw new InputError_1.InputError.TypeError(`Given PreKeyMessage doesn't match expected signature.`, InputError_1.InputError.CODE.CASE_406);\n    }\n}\nexports.PreKeyMessage = PreKeyMessage;\n//# sourceMappingURL=PreKeyMessage.js.map","/*\n * ed2curve: convert Ed25519 signing key pair into Curve25519\n * key pair suitable for Diffie-Hellman key exchange.\n *\n * Written by Dmitry Chestnykh in 2014. Public domain.\n */\n/* jshint newcap: false */\n(function(root, f) {\n  'use strict';\n  if (typeof module !== 'undefined' && module.exports) module.exports = f(require('tweetnacl'));\n  else root.ed2curve = f(root.nacl);\n}(this, function(nacl) {\n  'use strict';\n  if (!nacl) throw new Error('tweetnacl not loaded');\n\n  // -- Operations copied from TweetNaCl.js. --\n\n  var gf = function(init) {\n    var i, r = new Float64Array(16);\n    if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n    return r;\n  };\n\n  var gf0 = gf(),\n      gf1 = gf([1]),\n      D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n      I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\n  function car25519(o) {\n    var c;\n    var i;\n    for (i = 0; i < 16; i++) {\n      o[i] += 65536;\n      c = Math.floor(o[i] / 65536);\n      o[(i+1)*(i<15?1:0)] += c - 1 + 37 * (c-1) * (i===15?1:0);\n      o[i] -= (c * 65536);\n    }\n  }\n\n  function sel25519(p, q, b) {\n    var t, c = ~(b-1);\n    for (var i = 0; i < 16; i++) {\n      t = c & (p[i] ^ q[i]);\n      p[i] ^= t;\n      q[i] ^= t;\n    }\n  }\n\n  function unpack25519(o, n) {\n    var i;\n    for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n    o[15] &= 0x7fff;\n  }\n\n  // addition\n  function A(o, a, b) {\n    var i;\n    for (i = 0; i < 16; i++) o[i] = (a[i] + b[i])|0;\n  }\n\n  // subtraction\n  function Z(o, a, b) {\n    var i;\n    for (i = 0; i < 16; i++) o[i] = (a[i] - b[i])|0;\n  }\n\n  // multiplication\n  function M(o, a, b) {\n    var i, j, t = new Float64Array(31);\n    for (i = 0; i < 31; i++) t[i] = 0;\n    for (i = 0; i < 16; i++) {\n      for (j = 0; j < 16; j++) {\n        t[i+j] += a[i] * b[j];\n      }\n    }\n    for (i = 0; i < 15; i++) {\n      t[i] += 38 * t[i+16];\n    }\n    for (i = 0; i < 16; i++) o[i] = t[i];\n    car25519(o);\n    car25519(o);\n  }\n\n  // squaring\n  function S(o, a) {\n    M(o, a, a);\n  }\n\n  // inversion\n  function inv25519(o, i) {\n    var c = gf();\n    var a;\n    for (a = 0; a < 16; a++) c[a] = i[a];\n    for (a = 253; a >= 0; a--) {\n      S(c, c);\n      if(a !== 2 && a !== 4) M(c, c, i);\n    }\n    for (a = 0; a < 16; a++) o[a] = c[a];\n  }\n\n  function pack25519(o, n) {\n    var i, j, b;\n    var m = gf(), t = gf();\n    for (i = 0; i < 16; i++) t[i] = n[i];\n    car25519(t);\n    car25519(t);\n    car25519(t);\n    for (j = 0; j < 2; j++) {\n      m[0] = t[0] - 0xffed;\n      for (i = 1; i < 15; i++) {\n        m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n        m[i-1] &= 0xffff;\n      }\n      m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n      b = (m[15]>>16) & 1;\n      m[14] &= 0xffff;\n      sel25519(t, m, 1-b);\n    }\n    for (i = 0; i < 16; i++) {\n      o[2*i] = t[i] & 0xff;\n      o[2*i+1] = t[i] >> 8;\n    }\n  }\n\n  function par25519(a) {\n    var d = new Uint8Array(32);\n    pack25519(d, a);\n    return d[0] & 1;\n  }\n\n  function vn(x, xi, y, yi, n) {\n    var i, d = 0;\n    for (i = 0; i < n; i++) d |= x[xi + i] ^ y[yi + i];\n    return (1 & ((d - 1) >>> 8)) - 1;\n  }\n\n  function crypto_verify_32(x, xi, y, yi) {\n    return vn(x, xi, y, yi, 32);\n  }\n\n  function neq25519(a, b) {\n    var c = new Uint8Array(32), d = new Uint8Array(32);\n    pack25519(c, a);\n    pack25519(d, b);\n    return crypto_verify_32(c, 0, d, 0);\n  }\n\n  function pow2523(o, i) {\n    var c = gf();\n    var a;\n    for (a = 0; a < 16; a++) c[a] = i[a];\n    for (a = 250; a >= 0; a--) {\n      S(c, c);\n      if (a !== 1) M(c, c, i);\n    }\n    for (a = 0; a < 16; a++) o[a] = c[a];\n  }\n\n  function set25519(r, a) {\n    var i;\n    for (i = 0; i < 16; i++) r[i] = a[i] | 0;\n  }\n\n  function unpackneg(r, p) {\n    var t = gf(), chk = gf(), num = gf(),\n      den = gf(), den2 = gf(), den4 = gf(),\n      den6 = gf();\n\n    set25519(r[2], gf1);\n    unpack25519(r[1], p);\n    S(num, r[1]);\n    M(den, num, D);\n    Z(num, num, r[2]);\n    A(den, r[2], den);\n\n    S(den2, den);\n    S(den4, den2);\n    M(den6, den4, den2);\n    M(t, den6, num);\n    M(t, t, den);\n\n    pow2523(t, t);\n    M(t, t, num);\n    M(t, t, den);\n    M(t, t, den);\n    M(r[0], t, den);\n\n    S(chk, r[0]);\n    M(chk, chk, den);\n    if (neq25519(chk, num)) M(r[0], r[0], I);\n\n    S(chk, r[0]);\n    M(chk, chk, den);\n    if (neq25519(chk, num)) return -1;\n\n    if (par25519(r[0]) === (p[31] >> 7)) Z(r[0], gf0, r[0]);\n\n    M(r[3], r[0], r[1]);\n    return 0;\n  }\n\n  // ----\n\n  // Converts Ed25519 public key to Curve25519 public key.\n  // montgomeryX = (edwardsY + 1)*inverse(1 - edwardsY) mod p\n  function convertPublicKey(pk) {\n    var z = new Uint8Array(32),\n      q = [gf(), gf(), gf(), gf()],\n      a = gf(), b = gf();\n\n    if (unpackneg(q, pk)) return null; // reject invalid key\n\n    var y = q[1];\n\n    A(a, gf1, y);\n    Z(b, gf1, y);\n    inv25519(b, b);\n    M(a, a, b);\n\n    pack25519(z, a);\n    return z;\n  }\n\n  // Converts Ed25519 secret key to Curve25519 secret key.\n  function convertSecretKey(sk) {\n    var d = new Uint8Array(64), o = new Uint8Array(32), i;\n    nacl.lowlevel.crypto_hash(d, sk, 32);\n    d[0] &= 248;\n    d[31] &= 127;\n    d[31] |= 64;\n    for (i = 0; i < 32; i++) o[i] = d[i];\n    for (i = 0; i < 64; i++) d[i] = 0;\n    return o;\n  }\n\n  function convertKeyPair(edKeyPair) {\n    var publicKey = convertPublicKey(edKeyPair.publicKey);\n    if (!publicKey) return null;\n    return {\n      publicKey: publicKey,\n      secretKey: convertSecretKey(edKeyPair.secretKey)\n    };\n  }\n\n  return {\n    convertPublicKey: convertPublicKey,\n    convertSecretKey: convertSecretKey,\n    convertKeyPair: convertKeyPair,\n  };\n\n}));\n","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ed2curve = require(\"ed2curve\");\nconst sodium = require(\"libsodium-wrappers-sumo\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst InputError_1 = require(\"../errors/InputError\");\nconst ArrayUtil = require(\"../util/ArrayUtil\");\nclass SecretKey {\n    constructor() {\n        this.sec_curve = new Uint8Array([]);\n        this.sec_edward = new Uint8Array([]);\n    }\n    static new(sec_edward, sec_curve) {\n        const sk = ClassUtil.new_instance(SecretKey);\n        sk.sec_edward = sec_edward;\n        sk.sec_curve = sec_curve;\n        return sk;\n    }\n    /**\n     * This function can be used to compute a message signature.\n     * @param message Message to be signed\n     * @returns A message signature\n     */\n    sign(message) {\n        return sodium.crypto_sign_detached(message, this.sec_edward);\n    }\n    /**\n     * This function can be used to compute a shared secret given a user's secret key and another\n     * user's public key.\n     * @param public_key Another user's public key\n     * @returns Array buffer view of the computed shared secret\n     */\n    shared_secret(public_key) {\n        const shared_secret = sodium.crypto_scalarmult(this.sec_curve, public_key.pub_curve);\n        ArrayUtil.assert_is_not_zeros(shared_secret);\n        return shared_secret;\n    }\n    encode(encoder) {\n        encoder.object(1);\n        encoder.u8(0);\n        return encoder.bytes(this.sec_edward);\n    }\n    static decode(decoder) {\n        const self = ClassUtil.new_instance(SecretKey);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    self.sec_edward = new Uint8Array(decoder.bytes());\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        const sec_curve = ed2curve.convertSecretKey(self.sec_edward);\n        if (sec_curve) {\n            self.sec_curve = sec_curve;\n            return self;\n        }\n        throw new InputError_1.InputError.ConversionError('Could not convert public key with ed2curve.', 408);\n    }\n}\nexports.SecretKey = SecretKey;\n//# sourceMappingURL=SecretKey.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sodium = require(\"libsodium-wrappers-sumo\");\nconst DecodeError_1 = require(\"../errors/DecodeError\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst RandomUtil = require(\"../util/RandomUtil\");\nclass SessionTag {\n    constructor() {\n        this.tag = new Uint8Array([]);\n    }\n    static new() {\n        const length = 16;\n        const st = ClassUtil.new_instance(SessionTag);\n        st.tag = RandomUtil.random_bytes(length);\n        return st;\n    }\n    toString() {\n        return sodium.to_hex(this.tag);\n    }\n    encode(encoder) {\n        return encoder.bytes(this.tag);\n    }\n    static decode(decoder) {\n        const length = 16;\n        const bytes = new Uint8Array(decoder.bytes());\n        if (bytes.byteLength !== length) {\n            throw new DecodeError_1.DecodeError.InvalidArrayLen(`Session tag should be 16 bytes, not ${bytes.byteLength} bytes.`, DecodeError_1.DecodeError.CODE.CASE_303);\n        }\n        const st = ClassUtil.new_instance(SessionTag);\n        st.tag = new Uint8Array(bytes);\n        return st;\n    }\n}\nexports.SessionTag = SessionTag;\n//# sourceMappingURL=SessionTag.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CipherKey_1 = require(\"../derived/CipherKey\");\nconst MacKey_1 = require(\"../derived/MacKey\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nclass MessageKeys {\n    constructor() {\n        this.cipher_key = new CipherKey_1.CipherKey();\n        this.counter = -1;\n        this.mac_key = new MacKey_1.MacKey(new Uint8Array([]));\n    }\n    static new(cipher_key, mac_key, counter) {\n        const mk = ClassUtil.new_instance(MessageKeys);\n        mk.cipher_key = cipher_key;\n        mk.mac_key = mac_key;\n        mk.counter = counter;\n        return mk;\n    }\n    _counter_as_nonce() {\n        const nonce = new ArrayBuffer(8);\n        new DataView(nonce).setUint32(0, this.counter);\n        return new Uint8Array(nonce);\n    }\n    encrypt(plaintext) {\n        return this.cipher_key.encrypt(plaintext, this._counter_as_nonce());\n    }\n    decrypt(ciphertext) {\n        return this.cipher_key.decrypt(ciphertext, this._counter_as_nonce());\n    }\n    encode(encoder) {\n        encoder.object(3);\n        encoder.u8(0);\n        this.cipher_key.encode(encoder);\n        encoder.u8(1);\n        this.mac_key.encode(encoder);\n        encoder.u8(2);\n        return encoder.u32(this.counter);\n    }\n    static decode(decoder) {\n        const self = ClassUtil.new_instance(MessageKeys);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    self.cipher_key = CipherKey_1.CipherKey.decode(decoder);\n                    break;\n                case 1:\n                    self.mac_key = MacKey_1.MacKey.decode(decoder);\n                    break;\n                case 2:\n                    self.counter = decoder.u32();\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        return self;\n    }\n}\nexports.MessageKeys = MessageKeys;\n//# sourceMappingURL=MessageKeys.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sodium = require(\"libsodium-wrappers-sumo\");\nconst ArrayUtil = require(\"../util/ArrayUtil\");\nconst MemoryUtil = require(\"../util/MemoryUtil\");\n/**\n * HMAC-based Key Derivation Function\n *\n * @param input Initial Keying Material (IKM)\n * @param info Key Derivation Data (Info)\n * @param length Length of the derived key in bytes (L)\n */\nfunction hkdf(salt, input, info, length) {\n    const convert_type = (value) => {\n        if (typeof value === 'string') {\n            return sodium.from_string(value);\n        }\n        return value;\n    };\n    salt = convert_type(salt);\n    input = convert_type(input);\n    info = convert_type(info);\n    const HASH_LEN = 32;\n    const salt_to_key = (received_salt) => {\n        const keybytes = sodium.crypto_auth_hmacsha256_KEYBYTES;\n        if (received_salt.length > keybytes) {\n            return sodium.crypto_hash_sha256(received_salt);\n        }\n        const key = new Uint8Array(keybytes);\n        key.set(received_salt);\n        return key;\n    };\n    const extract = (received_salt, received_input) => {\n        return sodium.crypto_auth_hmacsha256(received_input, salt_to_key(received_salt));\n    };\n    const expand = (tag, received_info, received_length) => {\n        const num_blocks = Math.ceil(received_length / HASH_LEN);\n        let hmac = new Uint8Array(0);\n        let result = new Uint8Array(0);\n        for (let index = 0; index <= num_blocks - 1; index++) {\n            const buf = ArrayUtil.concatenate_array_buffers([hmac, received_info, new Uint8Array([index + 1])]);\n            hmac = sodium.crypto_auth_hmacsha256(buf, tag);\n            result = ArrayUtil.concatenate_array_buffers([result, hmac]);\n        }\n        return new Uint8Array(result.buffer.slice(0, received_length));\n    };\n    const key = extract(salt, input);\n    MemoryUtil.zeroize(input);\n    MemoryUtil.zeroize(salt);\n    return expand(key, info, length);\n}\nexports.hkdf = hkdf;\n//# sourceMappingURL=KeyDerivationUtil.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CBOR = require(\"@wireapp/cbor\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst IdentityKey_1 = require(\"./IdentityKey\");\nconst KeyPair_1 = require(\"./KeyPair\");\nconst SecretKey_1 = require(\"./SecretKey\");\nclass IdentityKeyPair {\n    constructor() {\n        this.public_key = new IdentityKey_1.IdentityKey();\n        this.secret_key = new SecretKey_1.SecretKey();\n        this.version = -1;\n    }\n    static new() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const key_pair = yield KeyPair_1.KeyPair.new();\n            const ikp = ClassUtil.new_instance(IdentityKeyPair);\n            ikp.version = 1;\n            ikp.secret_key = key_pair.secret_key;\n            ikp.public_key = IdentityKey_1.IdentityKey.new(key_pair.public_key);\n            return ikp;\n        });\n    }\n    serialise() {\n        const encoder = new CBOR.Encoder();\n        this.encode(encoder);\n        return encoder.get_buffer();\n    }\n    static deserialise(buf) {\n        const decoder = new CBOR.Decoder(buf);\n        return IdentityKeyPair.decode(decoder);\n    }\n    encode(encoder) {\n        encoder.object(3);\n        encoder.u8(0);\n        encoder.u8(this.version);\n        encoder.u8(1);\n        this.secret_key.encode(encoder);\n        encoder.u8(2);\n        return this.public_key.encode(encoder);\n    }\n    static decode(decoder) {\n        const self = ClassUtil.new_instance(IdentityKeyPair);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    self.version = decoder.u8();\n                    break;\n                case 1:\n                    self.secret_key = SecretKey_1.SecretKey.decode(decoder);\n                    break;\n                case 2:\n                    self.public_key = IdentityKey_1.IdentityKey.decode(decoder);\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        return self;\n    }\n}\nexports.IdentityKeyPair = IdentityKeyPair;\n//# sourceMappingURL=IdentityKeyPair.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CBOR = require(\"@wireapp/cbor\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst InputError_1 = require(\"../errors/InputError\");\nconst KeyPair_1 = require(\"./KeyPair\");\n/**\n * Pre-generated (and regularly refreshed) pre-keys.\n * A Pre-Shared Key contains the public long-term identity and ephemeral handshake keys for the initial triple DH.\n */\nclass PreKey {\n    constructor() {\n        this.key_id = -1;\n        this.key_pair = new KeyPair_1.KeyPair();\n        this.version = -1;\n    }\n    static new(pre_key_id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.validate_pre_key_id(pre_key_id);\n            const pk = ClassUtil.new_instance(PreKey);\n            pk.version = 1;\n            pk.key_id = pre_key_id;\n            pk.key_pair = yield KeyPair_1.KeyPair.new();\n            return pk;\n        });\n    }\n    static validate_pre_key_id(pre_key_id) {\n        if (pre_key_id === undefined) {\n            throw new InputError_1.InputError.TypeError('PreKey ID is undefined.', InputError_1.InputError.CODE.CASE_404);\n        }\n        if (typeof pre_key_id === 'string') {\n            throw new InputError_1.InputError.TypeError(`PreKey ID \"${pre_key_id}\" is a string.`, InputError_1.InputError.CODE.CASE_403);\n        }\n        if (pre_key_id % 1 !== 0) {\n            throw new InputError_1.InputError.TypeError(`PreKey ID \"${pre_key_id}\" is a floating-point number.`, InputError_1.InputError.CODE.CASE_403);\n        }\n        if (pre_key_id < 0 || pre_key_id > PreKey.MAX_PREKEY_ID) {\n            const message = `PreKey ID (${pre_key_id}) must be between or equal to 0 and ${PreKey.MAX_PREKEY_ID}.`;\n            throw new InputError_1.InputError.RangeError(message, InputError_1.InputError.CODE.CASE_400);\n        }\n    }\n    static last_resort() {\n        return PreKey.new(PreKey.MAX_PREKEY_ID);\n    }\n    static generate_prekeys(start, size) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.validate_pre_key_id(start);\n            this.validate_pre_key_id(size);\n            if (size === 0) {\n                return [];\n            }\n            return Promise.all(Array.from({ length: size }).map((_, index) => PreKey.new((start + index) % PreKey.MAX_PREKEY_ID)));\n        });\n    }\n    serialise() {\n        const encoder = new CBOR.Encoder();\n        this.encode(encoder);\n        return encoder.get_buffer();\n    }\n    static deserialise(buf) {\n        return PreKey.decode(new CBOR.Decoder(buf));\n    }\n    encode(encoder) {\n        encoder.object(3);\n        encoder.u8(0);\n        encoder.u8(this.version);\n        encoder.u8(1);\n        encoder.u16(this.key_id);\n        encoder.u8(2);\n        return this.key_pair.encode(encoder);\n    }\n    static decode(decoder) {\n        const self = ClassUtil.new_instance(PreKey);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    self.version = decoder.u8();\n                    break;\n                case 1:\n                    self.key_id = decoder.u16();\n                    break;\n                case 2:\n                    self.key_pair = KeyPair_1.KeyPair.decode(decoder);\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        return self;\n    }\n}\nexports.PreKey = PreKey;\nPreKey.MAX_PREKEY_ID = 0xffff;\n//# sourceMappingURL=PreKey.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass PreKeyAuth {\n}\nexports.PreKeyAuth = PreKeyAuth;\nPreKeyAuth.INVALID = 'Invalid';\nPreKeyAuth.UNKNOWN = 'Unknown';\nPreKeyAuth.VALID = 'Valid';\n//# sourceMappingURL=PreKeyAuth.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.random_bytes = (length) => {\n    if (typeof window !== 'undefined' && window.crypto) {\n        // browser\n        const buffer = new ArrayBuffer(length);\n        const buffer_view = new Uint8Array(buffer);\n        return window.crypto.getRandomValues(buffer_view);\n    }\n    // node\n    const crypto = require('crypto');\n    return new Uint8Array(crypto.randomBytes(length));\n};\n//# sourceMappingURL=RandomUtil.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CBOR = require(\"@wireapp/cbor\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst Message_1 = require(\"./Message\");\nclass Envelope {\n    constructor() {\n        this._message_enc = new Uint8Array([]);\n        this.mac = new Uint8Array([]);\n        this.message = new Message_1.Message();\n        this.version = -1;\n    }\n    static new(mac_key, message) {\n        const serialized_message = new Uint8Array(message.serialise());\n        const env = ClassUtil.new_instance(Envelope);\n        env.version = 1;\n        env.mac = mac_key.sign(serialized_message);\n        env.message = message;\n        env._message_enc = serialized_message;\n        Object.freeze(env);\n        return env;\n    }\n    /** @param mac_key The remote party's MacKey */\n    verify(mac_key) {\n        return mac_key.verify(this.mac, this._message_enc);\n    }\n    /** @returns The serialized message envelope */\n    serialise() {\n        const encoder = new CBOR.Encoder();\n        this.encode(encoder);\n        return encoder.get_buffer();\n    }\n    static deserialise(buf) {\n        const decoder = new CBOR.Decoder(buf);\n        return Envelope.decode(decoder);\n    }\n    encode(encoder) {\n        encoder.object(3);\n        encoder.u8(0);\n        encoder.u8(this.version);\n        encoder.u8(1);\n        encoder.object(1);\n        encoder.u8(0);\n        encoder.bytes(this.mac);\n        encoder.u8(2);\n        return encoder.bytes(this._message_enc);\n    }\n    static decode(decoder) {\n        const env = ClassUtil.new_instance(Envelope);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0: {\n                    env.version = decoder.u8();\n                    break;\n                }\n                case 1: {\n                    const nprops_mac = decoder.object();\n                    for (let subindex = 0; subindex <= nprops_mac - 1; subindex++) {\n                        switch (decoder.u8()) {\n                            case 0:\n                                env.mac = new Uint8Array(decoder.bytes());\n                                break;\n                            default:\n                                decoder.skip();\n                        }\n                    }\n                    break;\n                }\n                case 2: {\n                    env._message_enc = new Uint8Array(decoder.bytes());\n                    break;\n                }\n                default: {\n                    decoder.skip();\n                }\n            }\n        }\n        env.message = Message_1.Message.deserialise(env._message_enc.buffer);\n        Object.freeze(env);\n        return env;\n    }\n}\nexports.Envelope = Envelope;\n//# sourceMappingURL=Envelope.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst PublicKey_1 = require(\"../keys/PublicKey\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst DecryptError_1 = require(\"../errors/DecryptError\");\nconst ProteusError_1 = require(\"../errors/ProteusError\");\nconst ChainKey_1 = require(\"./ChainKey\");\nconst MessageKeys_1 = require(\"./MessageKeys\");\nclass RecvChain {\n    constructor() {\n        this.chain_key = new ChainKey_1.ChainKey();\n        this.message_keys = [];\n        this.ratchet_key = new PublicKey_1.PublicKey();\n    }\n    static new(chain_key, public_key) {\n        const rc = ClassUtil.new_instance(RecvChain);\n        rc.chain_key = chain_key;\n        rc.ratchet_key = public_key;\n        rc.message_keys = [];\n        return rc;\n    }\n    try_message_keys(envelope, msg) {\n        var _a;\n        if (((_a = this.message_keys[0]) === null || _a === void 0 ? void 0 : _a.counter) > msg.counter) {\n            const message = `Message too old. Counter for oldest staged chain key is '${this.message_keys[0].counter}' while message counter is '${msg.counter}'.`;\n            throw new DecryptError_1.DecryptError.OutdatedMessage(message, DecryptError_1.DecryptError.CODE.CASE_208);\n        }\n        const idx = this.message_keys.findIndex(mk => {\n            return mk.counter === msg.counter;\n        });\n        if (idx === -1) {\n            throw new DecryptError_1.DecryptError.DuplicateMessage(undefined, DecryptError_1.DecryptError.CODE.CASE_209);\n        }\n        const mk = this.message_keys.splice(idx, 1)[0];\n        if (!envelope.verify(mk.mac_key)) {\n            const message = `Envelope verification failed for message with counter behind. Message index is '${msg.counter}' while receive chain index is '${this.chain_key.idx}'.`;\n            throw new DecryptError_1.DecryptError.InvalidSignature(message, DecryptError_1.DecryptError.CODE.CASE_210);\n        }\n        return mk.decrypt(msg.cipher_text);\n    }\n    stage_message_keys(msg) {\n        const num = msg.counter - this.chain_key.idx;\n        if (num > RecvChain.MAX_COUNTER_GAP) {\n            if (this.chain_key.idx === 0) {\n                throw new DecryptError_1.DecryptError.TooDistantFuture('Skipped too many messages at the beginning of a receive chain.', DecryptError_1.DecryptError.CODE.CASE_211);\n            }\n            throw new DecryptError_1.DecryptError.TooDistantFuture(`Skipped too many messages within a used receive chain. Receive chain counter is '${this.chain_key.idx}'`, DecryptError_1.DecryptError.CODE.CASE_212);\n        }\n        const keys = [];\n        let chk = this.chain_key;\n        for (let index = 0; index <= num - 1; index++) {\n            keys.push(chk.message_keys());\n            chk = chk.next();\n        }\n        const mk = chk.message_keys();\n        return [chk, mk, keys];\n    }\n    commit_message_keys(keys) {\n        if (keys.length > RecvChain.MAX_COUNTER_GAP) {\n            throw new ProteusError_1.ProteusError(`Number of message keys (${keys.length}) exceed message chain counter gap (${RecvChain.MAX_COUNTER_GAP}).`, ProteusError_1.ProteusError.CODE.CASE_103);\n        }\n        const excess = this.message_keys.length + keys.length - RecvChain.MAX_COUNTER_GAP;\n        for (let index = 0; index <= excess - 1; index++) {\n            this.message_keys.shift();\n        }\n        keys.map(key => this.message_keys.push(key));\n        if (keys.length > RecvChain.MAX_COUNTER_GAP) {\n            throw new ProteusError_1.ProteusError(`Skipped message keys which exceed the message chain counter gap (${RecvChain.MAX_COUNTER_GAP}).`, ProteusError_1.ProteusError.CODE.CASE_104);\n        }\n    }\n    encode(encoder) {\n        encoder.object(3);\n        encoder.u8(0);\n        this.chain_key.encode(encoder);\n        encoder.u8(1);\n        this.ratchet_key.encode(encoder);\n        encoder.u8(2);\n        encoder.array(this.message_keys.length);\n        return this.message_keys.map(key => key.encode(encoder));\n    }\n    static decode(decoder) {\n        const self = ClassUtil.new_instance(RecvChain);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0: {\n                    self.chain_key = ChainKey_1.ChainKey.decode(decoder);\n                    break;\n                }\n                case 1: {\n                    self.ratchet_key = PublicKey_1.PublicKey.decode(decoder);\n                    break;\n                }\n                case 2: {\n                    self.message_keys = [];\n                    let len = decoder.array();\n                    while (len--) {\n                        self.message_keys.push(MessageKeys_1.MessageKeys.decode(decoder));\n                    }\n                    break;\n                }\n                default: {\n                    decoder.skip();\n                }\n            }\n        }\n        return self;\n    }\n}\nexports.RecvChain = RecvChain;\nRecvChain.MAX_COUNTER_GAP = 1000;\n//# sourceMappingURL=RecvChain.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CipherKey_1 = require(\"../derived/CipherKey\");\nconst DerivedSecrets_1 = require(\"../derived/DerivedSecrets\");\nconst InputError_1 = require(\"../errors/InputError\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst ChainKey_1 = require(\"./ChainKey\");\nclass RootKey {\n    constructor() {\n        this.key = new CipherKey_1.CipherKey();\n    }\n    /**\n     * @param cipher_key Cipher key generated by derived secrets\n     */\n    static from_cipher_key(cipher_key) {\n        const rk = ClassUtil.new_instance(RootKey);\n        rk.key = cipher_key;\n        return rk;\n    }\n    /**\n     * @param ours Our key pair\n     * @param theirs Their public key\n     */\n    dh_ratchet(ours, theirs) {\n        const secret = ours.secret_key.shared_secret(theirs);\n        const derived_secrets = DerivedSecrets_1.DerivedSecrets.kdf(secret, this.key.key, 'dh_ratchet');\n        return [RootKey.from_cipher_key(derived_secrets.cipher_key), ChainKey_1.ChainKey.from_mac_key(derived_secrets.mac_key, 0)];\n    }\n    encode(encoder) {\n        encoder.object(1);\n        encoder.u8(0);\n        return this.key.encode(encoder);\n    }\n    static decode(decoder) {\n        let cipher_key = null;\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    cipher_key = CipherKey_1.CipherKey.decode(decoder);\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        if (cipher_key) {\n            return RootKey.from_cipher_key(cipher_key);\n        }\n        throw new InputError_1.InputError.TypeError(`Given RootKey doesn't match expected signature.`, InputError_1.InputError.CODE.CASE_407);\n    }\n}\nexports.RootKey = RootKey;\n//# sourceMappingURL=RootKey.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst KeyPair_1 = require(\"../keys/KeyPair\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst ChainKey_1 = require(\"./ChainKey\");\nclass SendChain {\n    constructor() {\n        this.chain_key = new ChainKey_1.ChainKey();\n        this.ratchet_key = new KeyPair_1.KeyPair();\n    }\n    static new(chain_key, keypair) {\n        const sc = ClassUtil.new_instance(SendChain);\n        sc.chain_key = chain_key;\n        sc.ratchet_key = keypair;\n        return sc;\n    }\n    encode(encoder) {\n        encoder.object(2);\n        encoder.u8(0);\n        this.chain_key.encode(encoder);\n        encoder.u8(1);\n        return this.ratchet_key.encode(encoder);\n    }\n    static decode(decoder) {\n        const self = ClassUtil.new_instance(SendChain);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    self.chain_key = ChainKey_1.ChainKey.decode(decoder);\n                    break;\n                case 1:\n                    self.ratchet_key = KeyPair_1.KeyPair.decode(decoder);\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        return self;\n    }\n}\nexports.SendChain = SendChain;\n//# sourceMappingURL=SendChain.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CBOR = require(\"@wireapp/cbor\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst MemoryUtil = require(\"../util/MemoryUtil\");\nconst DecodeError_1 = require(\"../errors/DecodeError\");\nconst DecryptError_1 = require(\"../errors/DecryptError\");\nconst ProteusError_1 = require(\"../errors/ProteusError\");\nconst SessionState_1 = require(\"./SessionState\");\nconst IdentityKey_1 = require(\"../keys/IdentityKey\");\nconst IdentityKeyPair_1 = require(\"../keys/IdentityKeyPair\");\nconst KeyPair_1 = require(\"../keys/KeyPair\");\nconst PreKey_1 = require(\"../keys/PreKey\");\nconst PublicKey_1 = require(\"../keys/PublicKey\");\nconst CipherMessage_1 = require(\"../message/CipherMessage\");\nconst PreKeyMessage_1 = require(\"../message/PreKeyMessage\");\nconst SessionTag_1 = require(\"../message/SessionTag\");\nclass Session {\n    constructor() {\n        this.counter = 0;\n        this.version = 1;\n        this.local_identity = new IdentityKeyPair_1.IdentityKeyPair();\n        this.pending_prekey = null;\n        this.remote_identity = new IdentityKey_1.IdentityKey();\n        this.session_states = {};\n        this.session_tag = new SessionTag_1.SessionTag();\n    }\n    /**\n     * @param local_identity Alice's Identity Key Pair\n     * @param remote_pkbundle Bob's Pre-Key Bundle\n     */\n    static init_from_prekey(local_identity, remote_pkbundle) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const alice_base = yield KeyPair_1.KeyPair.new();\n            const state = yield SessionState_1.SessionState.init_as_alice(local_identity, alice_base, remote_pkbundle);\n            const session_tag = SessionTag_1.SessionTag.new();\n            const session = ClassUtil.new_instance(this);\n            session.session_tag = session_tag;\n            session.local_identity = local_identity;\n            session.remote_identity = remote_pkbundle.identity_key;\n            session.pending_prekey = [remote_pkbundle.prekey_id, alice_base.public_key];\n            session.session_states = {};\n            session._insert_session_state(session_tag, state);\n            return session;\n        });\n    }\n    static init_from_message(our_identity, prekey_store, envelope) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const preKeyMessage = envelope.message;\n            if (preKeyMessage instanceof CipherMessage_1.CipherMessage) {\n                throw new DecryptError_1.DecryptError.InvalidMessage(\"Can't initialise a session from a CipherMessage.\", DecryptError_1.DecryptError.CODE.CASE_201);\n            }\n            if (preKeyMessage instanceof PreKeyMessage_1.PreKeyMessage) {\n                const session = ClassUtil.new_instance(Session);\n                session.session_tag = preKeyMessage.message.session_tag;\n                session.local_identity = our_identity;\n                session.remote_identity = preKeyMessage.identity_key;\n                session.pending_prekey = null;\n                session.session_states = {};\n                const state = yield session._new_state(prekey_store, preKeyMessage);\n                const plain = yield state.decrypt(envelope, preKeyMessage.message);\n                session._insert_session_state(preKeyMessage.message.session_tag, state);\n                if (preKeyMessage.prekey_id < PreKey_1.PreKey.MAX_PREKEY_ID) {\n                    MemoryUtil.zeroize(yield prekey_store.load_prekey(preKeyMessage.prekey_id));\n                    try {\n                        yield prekey_store.delete_prekey(preKeyMessage.prekey_id);\n                    }\n                    catch (error) {\n                        throw new DecryptError_1.DecryptError.PrekeyNotFound(`Could not delete PreKey: ${error.message}`, DecryptError_1.DecryptError.CODE.CASE_203);\n                    }\n                }\n                return [session, plain];\n            }\n            throw new DecryptError_1.DecryptError.InvalidMessage('Unknown message format: The message is neither a \"CipherMessage\" nor a \"PreKeyMessage\".', DecryptError_1.DecryptError.CODE.CASE_202);\n        });\n    }\n    _new_state(pre_key_store, pre_key_message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const pre_key = yield pre_key_store.load_prekey(pre_key_message.prekey_id);\n            if (pre_key) {\n                return SessionState_1.SessionState.init_as_bob(this.local_identity, pre_key.key_pair, pre_key_message.identity_key, pre_key_message.base_key);\n            }\n            throw new ProteusError_1.ProteusError(`Unable to find PreKey ID \"${pre_key_message.prekey_id}\" in PreKey store \"${pre_key_store.constructor.name}\".`, ProteusError_1.ProteusError.CODE.CASE_101);\n        });\n    }\n    _insert_session_state(tag, state) {\n        if (this.session_states.hasOwnProperty(tag.toString())) {\n            this.session_states[tag.toString()].state = state;\n        }\n        else {\n            if (this.counter >= Number.MAX_SAFE_INTEGER) {\n                this.session_states = {};\n                this.counter = 0;\n            }\n            this.session_states[tag.toString()] = {\n                idx: this.counter,\n                state: state,\n                tag,\n            };\n            this.counter++;\n        }\n        if (this.session_tag.toString() !== tag.toString()) {\n            this.session_tag = tag;\n        }\n        const obj_size = (obj) => Object.keys(obj).length;\n        if (obj_size(this.session_states) < Session.MAX_SESSION_STATES) {\n            return;\n        }\n        // if we get here, it means that we have more than MAX_SESSION_STATES and\n        // we need to evict the oldest one.\n        return this._evict_oldest_session_state();\n    }\n    _evict_oldest_session_state() {\n        const oldest = Object.keys(this.session_states)\n            .filter(obj => obj.toString() !== this.session_tag.toString())\n            .reduce((lowest, obj, index) => {\n            return this.session_states[obj].idx < this.session_states[lowest].idx ? obj.toString() : lowest;\n        });\n        MemoryUtil.zeroize(this.session_states[oldest]);\n        delete this.session_states[oldest];\n    }\n    get_local_identity() {\n        return this.local_identity.public_key;\n    }\n    /**\n     * @param plaintext The plaintext which needs to be encrypted\n     */\n    encrypt(plaintext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const session_state = this.session_states[this.session_tag.toString()];\n            if (!session_state) {\n                throw new ProteusError_1.ProteusError(`Could not find session for tag '${(this.session_tag || '').toString()}'.`, ProteusError_1.ProteusError.CODE.CASE_102);\n            }\n            return session_state.state.encrypt(this.local_identity.public_key, this.pending_prekey, this.session_tag, plaintext);\n        });\n    }\n    decrypt(prekey_store, envelope) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const preKeyMessage = envelope.message;\n            if (preKeyMessage instanceof CipherMessage_1.CipherMessage) {\n                return this._decrypt_cipher_message(envelope, preKeyMessage);\n            }\n            if (preKeyMessage instanceof PreKeyMessage_1.PreKeyMessage) {\n                const actual_fingerprint = preKeyMessage.identity_key.fingerprint();\n                const expected_fingerprint = this.remote_identity.fingerprint();\n                if (actual_fingerprint !== expected_fingerprint) {\n                    const message = `Fingerprints do not match: We expected '${expected_fingerprint}', but received '${actual_fingerprint}'.`;\n                    throw new DecryptError_1.DecryptError.RemoteIdentityChanged(message, DecryptError_1.DecryptError.CODE.CASE_204);\n                }\n                return this._decrypt_prekey_message(envelope, preKeyMessage, prekey_store);\n            }\n            throw new DecryptError_1.DecryptError('Unknown message type.', DecryptError_1.DecryptError.CODE.CASE_200);\n        });\n    }\n    _decrypt_prekey_message(envelope, msg, prekey_store) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const plaintext = yield this._decrypt_cipher_message(envelope, msg.message);\n                return plaintext;\n            }\n            catch (error) {\n                if (error instanceof DecryptError_1.DecryptError.InvalidSignature || error instanceof DecryptError_1.DecryptError.InvalidMessage) {\n                    const state = yield this._new_state(prekey_store, msg);\n                    const plaintext = yield state.decrypt(envelope, msg.message);\n                    if (msg.prekey_id !== PreKey_1.PreKey.MAX_PREKEY_ID) {\n                        // TODO: Zeroize should be tested (and awaited) here!\n                        MemoryUtil.zeroize(yield prekey_store.load_prekey(msg.prekey_id));\n                        yield prekey_store.delete_prekey(msg.prekey_id);\n                    }\n                    this._insert_session_state(msg.message.session_tag, state);\n                    this.pending_prekey = null;\n                    return plaintext;\n                }\n                throw error;\n            }\n        });\n    }\n    _decrypt_cipher_message(envelope, msg) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const state = this.session_states[msg.session_tag.toString()];\n            if (!state) {\n                throw new DecryptError_1.DecryptError.InvalidMessage(`Local session not found for message session tag '${msg.session_tag}'.`, DecryptError_1.DecryptError.CODE.CASE_205);\n            }\n            // serialise and de-serialise for a deep clone\n            // THIS IS IMPORTANT, DO NOT MUTATE THE SESSION STATE IN-PLACE\n            // mutating in-place can lead to undefined behavior and undefined state in edge cases\n            const session_state = SessionState_1.SessionState.deserialise(state.state.serialise());\n            const plaintext = yield session_state.decrypt(envelope, msg);\n            this.pending_prekey = null;\n            this._insert_session_state(msg.session_tag, session_state);\n            return plaintext;\n        });\n    }\n    serialise() {\n        const encoder = new CBOR.Encoder();\n        this.encode(encoder);\n        return encoder.get_buffer();\n    }\n    static deserialise(local_identity, buf) {\n        const decoder = new CBOR.Decoder(buf);\n        return this.decode(local_identity, decoder);\n    }\n    encode(encoder) {\n        encoder.object(6);\n        encoder.u8(0);\n        encoder.u8(this.version);\n        encoder.u8(1);\n        this.session_tag.encode(encoder);\n        encoder.u8(2);\n        this.local_identity.public_key.encode(encoder);\n        encoder.u8(3);\n        this.remote_identity.encode(encoder);\n        encoder.u8(4);\n        if (this.pending_prekey) {\n            encoder.object(2);\n            encoder.u8(0);\n            encoder.u16(this.pending_prekey[0]);\n            encoder.u8(1);\n            this.pending_prekey[1].encode(encoder);\n        }\n        else {\n            encoder.null();\n        }\n        encoder.u8(5);\n        encoder.object(Object.keys(this.session_states).length);\n        for (const index in this.session_states) {\n            const state = this.session_states[index];\n            state.tag.encode(encoder);\n            state.state.encode(encoder);\n        }\n    }\n    static decode(local_identity, decoder) {\n        const self = ClassUtil.new_instance(this);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0: {\n                    self.version = decoder.u8();\n                    break;\n                }\n                case 1: {\n                    self.session_tag = SessionTag_1.SessionTag.decode(decoder);\n                    break;\n                }\n                case 2: {\n                    const identity_key = IdentityKey_1.IdentityKey.decode(decoder);\n                    if (local_identity.public_key.fingerprint() !== identity_key.fingerprint()) {\n                        throw new DecodeError_1.DecodeError.LocalIdentityChanged(undefined, DecodeError_1.DecodeError.CODE.CASE_300);\n                    }\n                    self.local_identity = local_identity;\n                    break;\n                }\n                case 3: {\n                    self.remote_identity = IdentityKey_1.IdentityKey.decode(decoder);\n                    break;\n                }\n                case 4: {\n                    switch (decoder.optional(() => decoder.object())) {\n                        case null:\n                            self.pending_prekey = null;\n                            break;\n                        case 2:\n                            self.pending_prekey = [];\n                            for (let key = 0; key <= 1; ++key) {\n                                switch (decoder.u8()) {\n                                    case 0:\n                                        self.pending_prekey[0] = decoder.u16();\n                                        break;\n                                    case 1:\n                                        self.pending_prekey[1] = PublicKey_1.PublicKey.decode(decoder);\n                                        break;\n                                }\n                            }\n                            break;\n                        default:\n                            throw new DecodeError_1.DecodeError.InvalidType(undefined, DecodeError_1.DecodeError.CODE.CASE_301);\n                    }\n                    break;\n                }\n                case 5: {\n                    self.session_states = {};\n                    const nprops = decoder.object();\n                    for (let index = 0; index <= nprops - 1; index++) {\n                        const tag = SessionTag_1.SessionTag.decode(decoder);\n                        self.session_states[tag.toString()] = {\n                            idx: index,\n                            state: SessionState_1.SessionState.decode(decoder),\n                            tag,\n                        };\n                    }\n                    break;\n                }\n                default: {\n                    decoder.skip();\n                }\n            }\n        }\n        return self;\n    }\n}\nexports.Session = Session;\nSession.MAX_RECV_CHAINS = 5;\nSession.MAX_SESSION_STATES = 100;\n//# sourceMappingURL=Session.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CBOR = require(\"@wireapp/cbor\");\nconst ArrayUtil = require(\"../util/ArrayUtil\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst MemoryUtil = require(\"../util/MemoryUtil\");\nconst DecryptError_1 = require(\"../errors/DecryptError\");\nconst DerivedSecrets_1 = require(\"../derived/DerivedSecrets\");\nconst KeyPair_1 = require(\"../keys/KeyPair\");\nconst CipherMessage_1 = require(\"../message/CipherMessage\");\nconst Envelope_1 = require(\"../message/Envelope\");\nconst PreKeyMessage_1 = require(\"../message/PreKeyMessage\");\nconst ChainKey_1 = require(\"./ChainKey\");\nconst RecvChain_1 = require(\"./RecvChain\");\nconst RootKey_1 = require(\"./RootKey\");\nconst SendChain_1 = require(\"./SendChain\");\nconst Session_1 = require(\"./Session\");\nclass SessionState {\n    constructor() {\n        this.prev_counter = -1;\n        this.recv_chains = [];\n        this.root_key = new RootKey_1.RootKey();\n        this.send_chain = new SendChain_1.SendChain();\n    }\n    static init_as_alice(alice_identity_pair, alice_base, bob_pkbundle) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const master_key = ArrayUtil.concatenate_array_buffers([\n                alice_identity_pair.secret_key.shared_secret(bob_pkbundle.public_key),\n                alice_base.secret_key.shared_secret(bob_pkbundle.identity_key.public_key),\n                alice_base.secret_key.shared_secret(bob_pkbundle.public_key),\n            ]);\n            const derived_secrets = DerivedSecrets_1.DerivedSecrets.kdf_without_salt(master_key, 'handshake');\n            MemoryUtil.zeroize(master_key);\n            const rootkey = RootKey_1.RootKey.from_cipher_key(derived_secrets.cipher_key);\n            const chainkey = ChainKey_1.ChainKey.from_mac_key(derived_secrets.mac_key, 0);\n            const recv_chains = [RecvChain_1.RecvChain.new(chainkey, bob_pkbundle.public_key)];\n            const send_ratchet = yield KeyPair_1.KeyPair.new();\n            const [rok, chk] = rootkey.dh_ratchet(send_ratchet, bob_pkbundle.public_key);\n            const send_chain = SendChain_1.SendChain.new(chk, send_ratchet);\n            const state = ClassUtil.new_instance(SessionState);\n            state.recv_chains = recv_chains;\n            state.send_chain = send_chain;\n            state.root_key = rok;\n            state.prev_counter = 0;\n            return state;\n        });\n    }\n    static init_as_bob(bob_ident, bob_prekey, alice_ident, alice_base) {\n        const master_key = ArrayUtil.concatenate_array_buffers([\n            bob_prekey.secret_key.shared_secret(alice_ident.public_key),\n            bob_ident.secret_key.shared_secret(alice_base),\n            bob_prekey.secret_key.shared_secret(alice_base),\n        ]);\n        const derived_secrets = DerivedSecrets_1.DerivedSecrets.kdf_without_salt(master_key, 'handshake');\n        MemoryUtil.zeroize(master_key);\n        const rootkey = RootKey_1.RootKey.from_cipher_key(derived_secrets.cipher_key);\n        const chainkey = ChainKey_1.ChainKey.from_mac_key(derived_secrets.mac_key, 0);\n        const send_chain = SendChain_1.SendChain.new(chainkey, bob_prekey);\n        const state = ClassUtil.new_instance(SessionState);\n        state.recv_chains = [];\n        state.send_chain = send_chain;\n        state.root_key = rootkey;\n        state.prev_counter = 0;\n        return state;\n    }\n    ratchet(ratchet_key) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const new_ratchet = yield KeyPair_1.KeyPair.new();\n            const [recv_root_key, recv_chain_key] = this.root_key.dh_ratchet(this.send_chain.ratchet_key, ratchet_key);\n            const [send_root_key, send_chain_key] = recv_root_key.dh_ratchet(new_ratchet, ratchet_key);\n            const recv_chain = RecvChain_1.RecvChain.new(recv_chain_key, ratchet_key);\n            const send_chain = SendChain_1.SendChain.new(send_chain_key, new_ratchet);\n            this.root_key = send_root_key;\n            this.prev_counter = this.send_chain.chain_key.idx;\n            this.send_chain = send_chain;\n            this.recv_chains.unshift(recv_chain);\n            if (this.recv_chains.length > Session_1.Session.MAX_RECV_CHAINS) {\n                for (let index = Session_1.Session.MAX_RECV_CHAINS; index < this.recv_chains.length; index++) {\n                    MemoryUtil.zeroize(this.recv_chains[index]);\n                }\n                this.recv_chains = this.recv_chains.slice(0, Session_1.Session.MAX_RECV_CHAINS);\n            }\n        });\n    }\n    /**\n     * @param identity_key Public identity key of the local identity key pair\n     * @param pending Pending pre-key\n     * @param tag Session tag\n     * @param plaintext The plaintext to encrypt\n     */\n    encrypt(identity_key, pending, tag, plaintext) {\n        const msgkeys = this.send_chain.chain_key.message_keys();\n        let message = CipherMessage_1.CipherMessage.new(tag, this.send_chain.chain_key.idx, this.prev_counter, this.send_chain.ratchet_key.public_key, msgkeys.encrypt(plaintext));\n        if (pending) {\n            message = PreKeyMessage_1.PreKeyMessage.new(pending[0], pending[1], identity_key, message);\n        }\n        const env = Envelope_1.Envelope.new(msgkeys.mac_key, message);\n        this.send_chain.chain_key = this.send_chain.chain_key.next();\n        return env;\n    }\n    decrypt(envelope, msg) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let idx = this.recv_chains.findIndex(chain => chain.ratchet_key.fingerprint() === msg.ratchet_key.fingerprint());\n            if (idx === -1) {\n                yield this.ratchet(msg.ratchet_key);\n                idx = 0;\n            }\n            const rc = this.recv_chains[idx];\n            if (msg.counter < rc.chain_key.idx) {\n                return rc.try_message_keys(envelope, msg);\n            }\n            else if (msg.counter == rc.chain_key.idx) {\n                const mks = rc.chain_key.message_keys();\n                if (!envelope.verify(mks.mac_key)) {\n                    throw new DecryptError_1.DecryptError.InvalidSignature(`Envelope verification failed for message with counters in sync at '${msg.counter}'. The received message was possibly encrypted for another client.`, DecryptError_1.DecryptError.CODE.CASE_206);\n                }\n                const plain = mks.decrypt(msg.cipher_text);\n                rc.chain_key = rc.chain_key.next();\n                return plain;\n            }\n            const [chk, mk, mks] = rc.stage_message_keys(msg);\n            if (!envelope.verify(mk.mac_key)) {\n                throw new DecryptError_1.DecryptError.InvalidSignature(`Envelope verification failed for message with counter ahead. Message index is '${msg.counter}' while receive chain index is '${rc.chain_key.idx}'.`, DecryptError_1.DecryptError.CODE.CASE_207);\n            }\n            const plain = mk.decrypt(msg.cipher_text);\n            rc.chain_key = chk.next();\n            rc.commit_message_keys(mks);\n            return plain;\n        });\n    }\n    serialise() {\n        const encoder = new CBOR.Encoder();\n        this.encode(encoder);\n        return encoder.get_buffer();\n    }\n    static deserialise(buf) {\n        return SessionState.decode(new CBOR.Decoder(buf));\n    }\n    encode(encoder) {\n        encoder.object(4);\n        encoder.u8(0);\n        encoder.array(this.recv_chains.length);\n        this.recv_chains.map(rch => rch.encode(encoder));\n        encoder.u8(1);\n        this.send_chain.encode(encoder);\n        encoder.u8(2);\n        this.root_key.encode(encoder);\n        encoder.u8(3);\n        return encoder.u32(this.prev_counter);\n    }\n    static decode(decoder) {\n        const self = ClassUtil.new_instance(SessionState);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0: {\n                    self.recv_chains = [];\n                    let len = decoder.array();\n                    while (len--) {\n                        self.recv_chains.push(RecvChain_1.RecvChain.decode(decoder));\n                    }\n                    break;\n                }\n                case 1: {\n                    self.send_chain = SendChain_1.SendChain.decode(decoder);\n                    break;\n                }\n                case 2: {\n                    self.root_key = RootKey_1.RootKey.decode(decoder);\n                    break;\n                }\n                case 3: {\n                    self.prev_counter = decoder.u32();\n                    break;\n                }\n                default: {\n                    decoder.skip();\n                }\n            }\n        }\n        return self;\n    }\n}\nexports.SessionState = SessionState;\n//# sourceMappingURL=SessionState.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst derived = require(\"./derived/\");\nexports.derived = derived;\nconst errors = require(\"./errors/\");\nexports.errors = errors;\nconst keys = require(\"./keys/\");\nexports.keys = keys;\nconst message = require(\"./message/\");\nexports.message = message;\nconst session = require(\"./session/\");\nexports.session = session;\nconst util = require(\"./util/\");\nexports.util = util;\n//# sourceMappingURL=index.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./CipherKey\"));\n__export(require(\"./DerivedSecrets\"));\n__export(require(\"./MacKey\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./DecodeError\"));\n__export(require(\"./DecryptError\"));\n__export(require(\"./InputError\"));\n__export(require(\"./ProteusError\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar IdentityKey_1 = require(\"./IdentityKey\");\nexports.IdentityKey = IdentityKey_1.IdentityKey;\nvar IdentityKeyPair_1 = require(\"./IdentityKeyPair\");\nexports.IdentityKeyPair = IdentityKeyPair_1.IdentityKeyPair;\nvar KeyPair_1 = require(\"./KeyPair\");\nexports.KeyPair = KeyPair_1.KeyPair;\nvar PreKey_1 = require(\"./PreKey\");\nexports.PreKey = PreKey_1.PreKey;\nvar PreKeyAuth_1 = require(\"./PreKeyAuth\");\nexports.PreKeyAuth = PreKeyAuth_1.PreKeyAuth;\nvar PreKeyBundle_1 = require(\"./PreKeyBundle\");\nexports.PreKeyBundle = PreKeyBundle_1.PreKeyBundle;\nvar PublicKey_1 = require(\"./PublicKey\");\nexports.PublicKey = PublicKey_1.PublicKey;\nvar SecretKey_1 = require(\"./SecretKey\");\nexports.SecretKey = SecretKey_1.SecretKey;\n//# sourceMappingURL=index.js.map","(function(nacl) {\n'use strict';\n\n// Ported in 2014 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n//\n// Implementation derived from TweetNaCl version 20140427.\n// See for details: http://tweetnacl.cr.yp.to/\n\nvar gf = function(init) {\n  var i, r = new Float64Array(16);\n  if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n  return r;\n};\n\n//  Pluggable, initialized in high-level API below.\nvar randombytes = function(/* x, n */) { throw new Error('no PRNG'); };\n\nvar _0 = new Uint8Array(16);\nvar _9 = new Uint8Array(32); _9[0] = 9;\n\nvar gf0 = gf(),\n    gf1 = gf([1]),\n    _121665 = gf([0xdb41, 1]),\n    D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n    D2 = gf([0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0, 0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]),\n    X = gf([0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c, 0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]),\n    Y = gf([0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]),\n    I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\nfunction ts64(x, i, h, l) {\n  x[i]   = (h >> 24) & 0xff;\n  x[i+1] = (h >> 16) & 0xff;\n  x[i+2] = (h >>  8) & 0xff;\n  x[i+3] = h & 0xff;\n  x[i+4] = (l >> 24)  & 0xff;\n  x[i+5] = (l >> 16)  & 0xff;\n  x[i+6] = (l >>  8)  & 0xff;\n  x[i+7] = l & 0xff;\n}\n\nfunction vn(x, xi, y, yi, n) {\n  var i,d = 0;\n  for (i = 0; i < n; i++) d |= x[xi+i]^y[yi+i];\n  return (1 & ((d - 1) >>> 8)) - 1;\n}\n\nfunction crypto_verify_16(x, xi, y, yi) {\n  return vn(x,xi,y,yi,16);\n}\n\nfunction crypto_verify_32(x, xi, y, yi) {\n  return vn(x,xi,y,yi,32);\n}\n\nfunction core_salsa20(o, p, k, c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n   x0 =  x0 +  j0 | 0;\n   x1 =  x1 +  j1 | 0;\n   x2 =  x2 +  j2 | 0;\n   x3 =  x3 +  j3 | 0;\n   x4 =  x4 +  j4 | 0;\n   x5 =  x5 +  j5 | 0;\n   x6 =  x6 +  j6 | 0;\n   x7 =  x7 +  j7 | 0;\n   x8 =  x8 +  j8 | 0;\n   x9 =  x9 +  j9 | 0;\n  x10 = x10 + j10 | 0;\n  x11 = x11 + j11 | 0;\n  x12 = x12 + j12 | 0;\n  x13 = x13 + j13 | 0;\n  x14 = x14 + j14 | 0;\n  x15 = x15 + j15 | 0;\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x1 >>>  0 & 0xff;\n  o[ 5] = x1 >>>  8 & 0xff;\n  o[ 6] = x1 >>> 16 & 0xff;\n  o[ 7] = x1 >>> 24 & 0xff;\n\n  o[ 8] = x2 >>>  0 & 0xff;\n  o[ 9] = x2 >>>  8 & 0xff;\n  o[10] = x2 >>> 16 & 0xff;\n  o[11] = x2 >>> 24 & 0xff;\n\n  o[12] = x3 >>>  0 & 0xff;\n  o[13] = x3 >>>  8 & 0xff;\n  o[14] = x3 >>> 16 & 0xff;\n  o[15] = x3 >>> 24 & 0xff;\n\n  o[16] = x4 >>>  0 & 0xff;\n  o[17] = x4 >>>  8 & 0xff;\n  o[18] = x4 >>> 16 & 0xff;\n  o[19] = x4 >>> 24 & 0xff;\n\n  o[20] = x5 >>>  0 & 0xff;\n  o[21] = x5 >>>  8 & 0xff;\n  o[22] = x5 >>> 16 & 0xff;\n  o[23] = x5 >>> 24 & 0xff;\n\n  o[24] = x6 >>>  0 & 0xff;\n  o[25] = x6 >>>  8 & 0xff;\n  o[26] = x6 >>> 16 & 0xff;\n  o[27] = x6 >>> 24 & 0xff;\n\n  o[28] = x7 >>>  0 & 0xff;\n  o[29] = x7 >>>  8 & 0xff;\n  o[30] = x7 >>> 16 & 0xff;\n  o[31] = x7 >>> 24 & 0xff;\n\n  o[32] = x8 >>>  0 & 0xff;\n  o[33] = x8 >>>  8 & 0xff;\n  o[34] = x8 >>> 16 & 0xff;\n  o[35] = x8 >>> 24 & 0xff;\n\n  o[36] = x9 >>>  0 & 0xff;\n  o[37] = x9 >>>  8 & 0xff;\n  o[38] = x9 >>> 16 & 0xff;\n  o[39] = x9 >>> 24 & 0xff;\n\n  o[40] = x10 >>>  0 & 0xff;\n  o[41] = x10 >>>  8 & 0xff;\n  o[42] = x10 >>> 16 & 0xff;\n  o[43] = x10 >>> 24 & 0xff;\n\n  o[44] = x11 >>>  0 & 0xff;\n  o[45] = x11 >>>  8 & 0xff;\n  o[46] = x11 >>> 16 & 0xff;\n  o[47] = x11 >>> 24 & 0xff;\n\n  o[48] = x12 >>>  0 & 0xff;\n  o[49] = x12 >>>  8 & 0xff;\n  o[50] = x12 >>> 16 & 0xff;\n  o[51] = x12 >>> 24 & 0xff;\n\n  o[52] = x13 >>>  0 & 0xff;\n  o[53] = x13 >>>  8 & 0xff;\n  o[54] = x13 >>> 16 & 0xff;\n  o[55] = x13 >>> 24 & 0xff;\n\n  o[56] = x14 >>>  0 & 0xff;\n  o[57] = x14 >>>  8 & 0xff;\n  o[58] = x14 >>> 16 & 0xff;\n  o[59] = x14 >>> 24 & 0xff;\n\n  o[60] = x15 >>>  0 & 0xff;\n  o[61] = x15 >>>  8 & 0xff;\n  o[62] = x15 >>> 16 & 0xff;\n  o[63] = x15 >>> 24 & 0xff;\n}\n\nfunction core_hsalsa20(o,p,k,c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x5 >>>  0 & 0xff;\n  o[ 5] = x5 >>>  8 & 0xff;\n  o[ 6] = x5 >>> 16 & 0xff;\n  o[ 7] = x5 >>> 24 & 0xff;\n\n  o[ 8] = x10 >>>  0 & 0xff;\n  o[ 9] = x10 >>>  8 & 0xff;\n  o[10] = x10 >>> 16 & 0xff;\n  o[11] = x10 >>> 24 & 0xff;\n\n  o[12] = x15 >>>  0 & 0xff;\n  o[13] = x15 >>>  8 & 0xff;\n  o[14] = x15 >>> 16 & 0xff;\n  o[15] = x15 >>> 24 & 0xff;\n\n  o[16] = x6 >>>  0 & 0xff;\n  o[17] = x6 >>>  8 & 0xff;\n  o[18] = x6 >>> 16 & 0xff;\n  o[19] = x6 >>> 24 & 0xff;\n\n  o[20] = x7 >>>  0 & 0xff;\n  o[21] = x7 >>>  8 & 0xff;\n  o[22] = x7 >>> 16 & 0xff;\n  o[23] = x7 >>> 24 & 0xff;\n\n  o[24] = x8 >>>  0 & 0xff;\n  o[25] = x8 >>>  8 & 0xff;\n  o[26] = x8 >>> 16 & 0xff;\n  o[27] = x8 >>> 24 & 0xff;\n\n  o[28] = x9 >>>  0 & 0xff;\n  o[29] = x9 >>>  8 & 0xff;\n  o[30] = x9 >>> 16 & 0xff;\n  o[31] = x9 >>> 24 & 0xff;\n}\n\nfunction crypto_core_salsa20(out,inp,k,c) {\n  core_salsa20(out,inp,k,c);\n}\n\nfunction crypto_core_hsalsa20(out,inp,k,c) {\n  core_hsalsa20(out,inp,k,c);\n}\n\nvar sigma = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);\n            // \"expand 32-byte k\"\n\nfunction crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n    mpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream_salsa20(c,cpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream(c,cpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20(c,cpos,d,sn,s);\n}\n\nfunction crypto_stream_xor(c,cpos,m,mpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);\n}\n\n/*\n* Port of Andrew Moon's Poly1305-donna-16. Public domain.\n* https://github.com/floodyberry/poly1305-donna\n*/\n\nvar poly1305 = function(key) {\n  this.buffer = new Uint8Array(16);\n  this.r = new Uint16Array(10);\n  this.h = new Uint16Array(10);\n  this.pad = new Uint16Array(8);\n  this.leftover = 0;\n  this.fin = 0;\n\n  var t0, t1, t2, t3, t4, t5, t6, t7;\n\n  t0 = key[ 0] & 0xff | (key[ 1] & 0xff) << 8; this.r[0] = ( t0                     ) & 0x1fff;\n  t1 = key[ 2] & 0xff | (key[ 3] & 0xff) << 8; this.r[1] = ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n  t2 = key[ 4] & 0xff | (key[ 5] & 0xff) << 8; this.r[2] = ((t1 >>> 10) | (t2 <<  6)) & 0x1f03;\n  t3 = key[ 6] & 0xff | (key[ 7] & 0xff) << 8; this.r[3] = ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n  t4 = key[ 8] & 0xff | (key[ 9] & 0xff) << 8; this.r[4] = ((t3 >>>  4) | (t4 << 12)) & 0x00ff;\n  this.r[5] = ((t4 >>>  1)) & 0x1ffe;\n  t5 = key[10] & 0xff | (key[11] & 0xff) << 8; this.r[6] = ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n  t6 = key[12] & 0xff | (key[13] & 0xff) << 8; this.r[7] = ((t5 >>> 11) | (t6 <<  5)) & 0x1f81;\n  t7 = key[14] & 0xff | (key[15] & 0xff) << 8; this.r[8] = ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n  this.r[9] = ((t7 >>>  5)) & 0x007f;\n\n  this.pad[0] = key[16] & 0xff | (key[17] & 0xff) << 8;\n  this.pad[1] = key[18] & 0xff | (key[19] & 0xff) << 8;\n  this.pad[2] = key[20] & 0xff | (key[21] & 0xff) << 8;\n  this.pad[3] = key[22] & 0xff | (key[23] & 0xff) << 8;\n  this.pad[4] = key[24] & 0xff | (key[25] & 0xff) << 8;\n  this.pad[5] = key[26] & 0xff | (key[27] & 0xff) << 8;\n  this.pad[6] = key[28] & 0xff | (key[29] & 0xff) << 8;\n  this.pad[7] = key[30] & 0xff | (key[31] & 0xff) << 8;\n};\n\npoly1305.prototype.blocks = function(m, mpos, bytes) {\n  var hibit = this.fin ? 0 : (1 << 11);\n  var t0, t1, t2, t3, t4, t5, t6, t7, c;\n  var d0, d1, d2, d3, d4, d5, d6, d7, d8, d9;\n\n  var h0 = this.h[0],\n      h1 = this.h[1],\n      h2 = this.h[2],\n      h3 = this.h[3],\n      h4 = this.h[4],\n      h5 = this.h[5],\n      h6 = this.h[6],\n      h7 = this.h[7],\n      h8 = this.h[8],\n      h9 = this.h[9];\n\n  var r0 = this.r[0],\n      r1 = this.r[1],\n      r2 = this.r[2],\n      r3 = this.r[3],\n      r4 = this.r[4],\n      r5 = this.r[5],\n      r6 = this.r[6],\n      r7 = this.r[7],\n      r8 = this.r[8],\n      r9 = this.r[9];\n\n  while (bytes >= 16) {\n    t0 = m[mpos+ 0] & 0xff | (m[mpos+ 1] & 0xff) << 8; h0 += ( t0                     ) & 0x1fff;\n    t1 = m[mpos+ 2] & 0xff | (m[mpos+ 3] & 0xff) << 8; h1 += ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n    t2 = m[mpos+ 4] & 0xff | (m[mpos+ 5] & 0xff) << 8; h2 += ((t1 >>> 10) | (t2 <<  6)) & 0x1fff;\n    t3 = m[mpos+ 6] & 0xff | (m[mpos+ 7] & 0xff) << 8; h3 += ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n    t4 = m[mpos+ 8] & 0xff | (m[mpos+ 9] & 0xff) << 8; h4 += ((t3 >>>  4) | (t4 << 12)) & 0x1fff;\n    h5 += ((t4 >>>  1)) & 0x1fff;\n    t5 = m[mpos+10] & 0xff | (m[mpos+11] & 0xff) << 8; h6 += ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n    t6 = m[mpos+12] & 0xff | (m[mpos+13] & 0xff) << 8; h7 += ((t5 >>> 11) | (t6 <<  5)) & 0x1fff;\n    t7 = m[mpos+14] & 0xff | (m[mpos+15] & 0xff) << 8; h8 += ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n    h9 += ((t7 >>> 5)) | hibit;\n\n    c = 0;\n\n    d0 = c;\n    d0 += h0 * r0;\n    d0 += h1 * (5 * r9);\n    d0 += h2 * (5 * r8);\n    d0 += h3 * (5 * r7);\n    d0 += h4 * (5 * r6);\n    c = (d0 >>> 13); d0 &= 0x1fff;\n    d0 += h5 * (5 * r5);\n    d0 += h6 * (5 * r4);\n    d0 += h7 * (5 * r3);\n    d0 += h8 * (5 * r2);\n    d0 += h9 * (5 * r1);\n    c += (d0 >>> 13); d0 &= 0x1fff;\n\n    d1 = c;\n    d1 += h0 * r1;\n    d1 += h1 * r0;\n    d1 += h2 * (5 * r9);\n    d1 += h3 * (5 * r8);\n    d1 += h4 * (5 * r7);\n    c = (d1 >>> 13); d1 &= 0x1fff;\n    d1 += h5 * (5 * r6);\n    d1 += h6 * (5 * r5);\n    d1 += h7 * (5 * r4);\n    d1 += h8 * (5 * r3);\n    d1 += h9 * (5 * r2);\n    c += (d1 >>> 13); d1 &= 0x1fff;\n\n    d2 = c;\n    d2 += h0 * r2;\n    d2 += h1 * r1;\n    d2 += h2 * r0;\n    d2 += h3 * (5 * r9);\n    d2 += h4 * (5 * r8);\n    c = (d2 >>> 13); d2 &= 0x1fff;\n    d2 += h5 * (5 * r7);\n    d2 += h6 * (5 * r6);\n    d2 += h7 * (5 * r5);\n    d2 += h8 * (5 * r4);\n    d2 += h9 * (5 * r3);\n    c += (d2 >>> 13); d2 &= 0x1fff;\n\n    d3 = c;\n    d3 += h0 * r3;\n    d3 += h1 * r2;\n    d3 += h2 * r1;\n    d3 += h3 * r0;\n    d3 += h4 * (5 * r9);\n    c = (d3 >>> 13); d3 &= 0x1fff;\n    d3 += h5 * (5 * r8);\n    d3 += h6 * (5 * r7);\n    d3 += h7 * (5 * r6);\n    d3 += h8 * (5 * r5);\n    d3 += h9 * (5 * r4);\n    c += (d3 >>> 13); d3 &= 0x1fff;\n\n    d4 = c;\n    d4 += h0 * r4;\n    d4 += h1 * r3;\n    d4 += h2 * r2;\n    d4 += h3 * r1;\n    d4 += h4 * r0;\n    c = (d4 >>> 13); d4 &= 0x1fff;\n    d4 += h5 * (5 * r9);\n    d4 += h6 * (5 * r8);\n    d4 += h7 * (5 * r7);\n    d4 += h8 * (5 * r6);\n    d4 += h9 * (5 * r5);\n    c += (d4 >>> 13); d4 &= 0x1fff;\n\n    d5 = c;\n    d5 += h0 * r5;\n    d5 += h1 * r4;\n    d5 += h2 * r3;\n    d5 += h3 * r2;\n    d5 += h4 * r1;\n    c = (d5 >>> 13); d5 &= 0x1fff;\n    d5 += h5 * r0;\n    d5 += h6 * (5 * r9);\n    d5 += h7 * (5 * r8);\n    d5 += h8 * (5 * r7);\n    d5 += h9 * (5 * r6);\n    c += (d5 >>> 13); d5 &= 0x1fff;\n\n    d6 = c;\n    d6 += h0 * r6;\n    d6 += h1 * r5;\n    d6 += h2 * r4;\n    d6 += h3 * r3;\n    d6 += h4 * r2;\n    c = (d6 >>> 13); d6 &= 0x1fff;\n    d6 += h5 * r1;\n    d6 += h6 * r0;\n    d6 += h7 * (5 * r9);\n    d6 += h8 * (5 * r8);\n    d6 += h9 * (5 * r7);\n    c += (d6 >>> 13); d6 &= 0x1fff;\n\n    d7 = c;\n    d7 += h0 * r7;\n    d7 += h1 * r6;\n    d7 += h2 * r5;\n    d7 += h3 * r4;\n    d7 += h4 * r3;\n    c = (d7 >>> 13); d7 &= 0x1fff;\n    d7 += h5 * r2;\n    d7 += h6 * r1;\n    d7 += h7 * r0;\n    d7 += h8 * (5 * r9);\n    d7 += h9 * (5 * r8);\n    c += (d7 >>> 13); d7 &= 0x1fff;\n\n    d8 = c;\n    d8 += h0 * r8;\n    d8 += h1 * r7;\n    d8 += h2 * r6;\n    d8 += h3 * r5;\n    d8 += h4 * r4;\n    c = (d8 >>> 13); d8 &= 0x1fff;\n    d8 += h5 * r3;\n    d8 += h6 * r2;\n    d8 += h7 * r1;\n    d8 += h8 * r0;\n    d8 += h9 * (5 * r9);\n    c += (d8 >>> 13); d8 &= 0x1fff;\n\n    d9 = c;\n    d9 += h0 * r9;\n    d9 += h1 * r8;\n    d9 += h2 * r7;\n    d9 += h3 * r6;\n    d9 += h4 * r5;\n    c = (d9 >>> 13); d9 &= 0x1fff;\n    d9 += h5 * r4;\n    d9 += h6 * r3;\n    d9 += h7 * r2;\n    d9 += h8 * r1;\n    d9 += h9 * r0;\n    c += (d9 >>> 13); d9 &= 0x1fff;\n\n    c = (((c << 2) + c)) | 0;\n    c = (c + d0) | 0;\n    d0 = c & 0x1fff;\n    c = (c >>> 13);\n    d1 += c;\n\n    h0 = d0;\n    h1 = d1;\n    h2 = d2;\n    h3 = d3;\n    h4 = d4;\n    h5 = d5;\n    h6 = d6;\n    h7 = d7;\n    h8 = d8;\n    h9 = d9;\n\n    mpos += 16;\n    bytes -= 16;\n  }\n  this.h[0] = h0;\n  this.h[1] = h1;\n  this.h[2] = h2;\n  this.h[3] = h3;\n  this.h[4] = h4;\n  this.h[5] = h5;\n  this.h[6] = h6;\n  this.h[7] = h7;\n  this.h[8] = h8;\n  this.h[9] = h9;\n};\n\npoly1305.prototype.finish = function(mac, macpos) {\n  var g = new Uint16Array(10);\n  var c, mask, f, i;\n\n  if (this.leftover) {\n    i = this.leftover;\n    this.buffer[i++] = 1;\n    for (; i < 16; i++) this.buffer[i] = 0;\n    this.fin = 1;\n    this.blocks(this.buffer, 0, 16);\n  }\n\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  for (i = 2; i < 10; i++) {\n    this.h[i] += c;\n    c = this.h[i] >>> 13;\n    this.h[i] &= 0x1fff;\n  }\n  this.h[0] += (c * 5);\n  c = this.h[0] >>> 13;\n  this.h[0] &= 0x1fff;\n  this.h[1] += c;\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  this.h[2] += c;\n\n  g[0] = this.h[0] + 5;\n  c = g[0] >>> 13;\n  g[0] &= 0x1fff;\n  for (i = 1; i < 10; i++) {\n    g[i] = this.h[i] + c;\n    c = g[i] >>> 13;\n    g[i] &= 0x1fff;\n  }\n  g[9] -= (1 << 13);\n\n  mask = (c ^ 1) - 1;\n  for (i = 0; i < 10; i++) g[i] &= mask;\n  mask = ~mask;\n  for (i = 0; i < 10; i++) this.h[i] = (this.h[i] & mask) | g[i];\n\n  this.h[0] = ((this.h[0]       ) | (this.h[1] << 13)                    ) & 0xffff;\n  this.h[1] = ((this.h[1] >>>  3) | (this.h[2] << 10)                    ) & 0xffff;\n  this.h[2] = ((this.h[2] >>>  6) | (this.h[3] <<  7)                    ) & 0xffff;\n  this.h[3] = ((this.h[3] >>>  9) | (this.h[4] <<  4)                    ) & 0xffff;\n  this.h[4] = ((this.h[4] >>> 12) | (this.h[5] <<  1) | (this.h[6] << 14)) & 0xffff;\n  this.h[5] = ((this.h[6] >>>  2) | (this.h[7] << 11)                    ) & 0xffff;\n  this.h[6] = ((this.h[7] >>>  5) | (this.h[8] <<  8)                    ) & 0xffff;\n  this.h[7] = ((this.h[8] >>>  8) | (this.h[9] <<  5)                    ) & 0xffff;\n\n  f = this.h[0] + this.pad[0];\n  this.h[0] = f & 0xffff;\n  for (i = 1; i < 8; i++) {\n    f = (((this.h[i] + this.pad[i]) | 0) + (f >>> 16)) | 0;\n    this.h[i] = f & 0xffff;\n  }\n\n  mac[macpos+ 0] = (this.h[0] >>> 0) & 0xff;\n  mac[macpos+ 1] = (this.h[0] >>> 8) & 0xff;\n  mac[macpos+ 2] = (this.h[1] >>> 0) & 0xff;\n  mac[macpos+ 3] = (this.h[1] >>> 8) & 0xff;\n  mac[macpos+ 4] = (this.h[2] >>> 0) & 0xff;\n  mac[macpos+ 5] = (this.h[2] >>> 8) & 0xff;\n  mac[macpos+ 6] = (this.h[3] >>> 0) & 0xff;\n  mac[macpos+ 7] = (this.h[3] >>> 8) & 0xff;\n  mac[macpos+ 8] = (this.h[4] >>> 0) & 0xff;\n  mac[macpos+ 9] = (this.h[4] >>> 8) & 0xff;\n  mac[macpos+10] = (this.h[5] >>> 0) & 0xff;\n  mac[macpos+11] = (this.h[5] >>> 8) & 0xff;\n  mac[macpos+12] = (this.h[6] >>> 0) & 0xff;\n  mac[macpos+13] = (this.h[6] >>> 8) & 0xff;\n  mac[macpos+14] = (this.h[7] >>> 0) & 0xff;\n  mac[macpos+15] = (this.h[7] >>> 8) & 0xff;\n};\n\npoly1305.prototype.update = function(m, mpos, bytes) {\n  var i, want;\n\n  if (this.leftover) {\n    want = (16 - this.leftover);\n    if (want > bytes)\n      want = bytes;\n    for (i = 0; i < want; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    bytes -= want;\n    mpos += want;\n    this.leftover += want;\n    if (this.leftover < 16)\n      return;\n    this.blocks(this.buffer, 0, 16);\n    this.leftover = 0;\n  }\n\n  if (bytes >= 16) {\n    want = bytes - (bytes % 16);\n    this.blocks(m, mpos, want);\n    mpos += want;\n    bytes -= want;\n  }\n\n  if (bytes) {\n    for (i = 0; i < bytes; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    this.leftover += bytes;\n  }\n};\n\nfunction crypto_onetimeauth(out, outpos, m, mpos, n, k) {\n  var s = new poly1305(k);\n  s.update(m, mpos, n);\n  s.finish(out, outpos);\n  return 0;\n}\n\nfunction crypto_onetimeauth_verify(h, hpos, m, mpos, n, k) {\n  var x = new Uint8Array(16);\n  crypto_onetimeauth(x,0,m,mpos,n,k);\n  return crypto_verify_16(h,hpos,x,0);\n}\n\nfunction crypto_secretbox(c,m,d,n,k) {\n  var i;\n  if (d < 32) return -1;\n  crypto_stream_xor(c,0,m,0,d,n,k);\n  crypto_onetimeauth(c, 16, c, 32, d - 32, c);\n  for (i = 0; i < 16; i++) c[i] = 0;\n  return 0;\n}\n\nfunction crypto_secretbox_open(m,c,d,n,k) {\n  var i;\n  var x = new Uint8Array(32);\n  if (d < 32) return -1;\n  crypto_stream(x,0,32,n,k);\n  if (crypto_onetimeauth_verify(c, 16,c, 32,d - 32,x) !== 0) return -1;\n  crypto_stream_xor(m,0,c,0,d,n,k);\n  for (i = 0; i < 32; i++) m[i] = 0;\n  return 0;\n}\n\nfunction set25519(r, a) {\n  var i;\n  for (i = 0; i < 16; i++) r[i] = a[i]|0;\n}\n\nfunction car25519(o) {\n  var i, v, c = 1;\n  for (i = 0; i < 16; i++) {\n    v = o[i] + c + 65535;\n    c = Math.floor(v / 65536);\n    o[i] = v - c * 65536;\n  }\n  o[0] += c-1 + 37 * (c-1);\n}\n\nfunction sel25519(p, q, b) {\n  var t, c = ~(b-1);\n  for (var i = 0; i < 16; i++) {\n    t = c & (p[i] ^ q[i]);\n    p[i] ^= t;\n    q[i] ^= t;\n  }\n}\n\nfunction pack25519(o, n) {\n  var i, j, b;\n  var m = gf(), t = gf();\n  for (i = 0; i < 16; i++) t[i] = n[i];\n  car25519(t);\n  car25519(t);\n  car25519(t);\n  for (j = 0; j < 2; j++) {\n    m[0] = t[0] - 0xffed;\n    for (i = 1; i < 15; i++) {\n      m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n      m[i-1] &= 0xffff;\n    }\n    m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n    b = (m[15]>>16) & 1;\n    m[14] &= 0xffff;\n    sel25519(t, m, 1-b);\n  }\n  for (i = 0; i < 16; i++) {\n    o[2*i] = t[i] & 0xff;\n    o[2*i+1] = t[i]>>8;\n  }\n}\n\nfunction neq25519(a, b) {\n  var c = new Uint8Array(32), d = new Uint8Array(32);\n  pack25519(c, a);\n  pack25519(d, b);\n  return crypto_verify_32(c, 0, d, 0);\n}\n\nfunction par25519(a) {\n  var d = new Uint8Array(32);\n  pack25519(d, a);\n  return d[0] & 1;\n}\n\nfunction unpack25519(o, n) {\n  var i;\n  for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n  o[15] &= 0x7fff;\n}\n\nfunction A(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] + b[i];\n}\n\nfunction Z(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] - b[i];\n}\n\nfunction M(o, a, b) {\n  var v, c,\n     t0 = 0,  t1 = 0,  t2 = 0,  t3 = 0,  t4 = 0,  t5 = 0,  t6 = 0,  t7 = 0,\n     t8 = 0,  t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n    t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n    t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n    b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11],\n    b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n\n  v = a[0];\n  t0 += v * b0;\n  t1 += v * b1;\n  t2 += v * b2;\n  t3 += v * b3;\n  t4 += v * b4;\n  t5 += v * b5;\n  t6 += v * b6;\n  t7 += v * b7;\n  t8 += v * b8;\n  t9 += v * b9;\n  t10 += v * b10;\n  t11 += v * b11;\n  t12 += v * b12;\n  t13 += v * b13;\n  t14 += v * b14;\n  t15 += v * b15;\n  v = a[1];\n  t1 += v * b0;\n  t2 += v * b1;\n  t3 += v * b2;\n  t4 += v * b3;\n  t5 += v * b4;\n  t6 += v * b5;\n  t7 += v * b6;\n  t8 += v * b7;\n  t9 += v * b8;\n  t10 += v * b9;\n  t11 += v * b10;\n  t12 += v * b11;\n  t13 += v * b12;\n  t14 += v * b13;\n  t15 += v * b14;\n  t16 += v * b15;\n  v = a[2];\n  t2 += v * b0;\n  t3 += v * b1;\n  t4 += v * b2;\n  t5 += v * b3;\n  t6 += v * b4;\n  t7 += v * b5;\n  t8 += v * b6;\n  t9 += v * b7;\n  t10 += v * b8;\n  t11 += v * b9;\n  t12 += v * b10;\n  t13 += v * b11;\n  t14 += v * b12;\n  t15 += v * b13;\n  t16 += v * b14;\n  t17 += v * b15;\n  v = a[3];\n  t3 += v * b0;\n  t4 += v * b1;\n  t5 += v * b2;\n  t6 += v * b3;\n  t7 += v * b4;\n  t8 += v * b5;\n  t9 += v * b6;\n  t10 += v * b7;\n  t11 += v * b8;\n  t12 += v * b9;\n  t13 += v * b10;\n  t14 += v * b11;\n  t15 += v * b12;\n  t16 += v * b13;\n  t17 += v * b14;\n  t18 += v * b15;\n  v = a[4];\n  t4 += v * b0;\n  t5 += v * b1;\n  t6 += v * b2;\n  t7 += v * b3;\n  t8 += v * b4;\n  t9 += v * b5;\n  t10 += v * b6;\n  t11 += v * b7;\n  t12 += v * b8;\n  t13 += v * b9;\n  t14 += v * b10;\n  t15 += v * b11;\n  t16 += v * b12;\n  t17 += v * b13;\n  t18 += v * b14;\n  t19 += v * b15;\n  v = a[5];\n  t5 += v * b0;\n  t6 += v * b1;\n  t7 += v * b2;\n  t8 += v * b3;\n  t9 += v * b4;\n  t10 += v * b5;\n  t11 += v * b6;\n  t12 += v * b7;\n  t13 += v * b8;\n  t14 += v * b9;\n  t15 += v * b10;\n  t16 += v * b11;\n  t17 += v * b12;\n  t18 += v * b13;\n  t19 += v * b14;\n  t20 += v * b15;\n  v = a[6];\n  t6 += v * b0;\n  t7 += v * b1;\n  t8 += v * b2;\n  t9 += v * b3;\n  t10 += v * b4;\n  t11 += v * b5;\n  t12 += v * b6;\n  t13 += v * b7;\n  t14 += v * b8;\n  t15 += v * b9;\n  t16 += v * b10;\n  t17 += v * b11;\n  t18 += v * b12;\n  t19 += v * b13;\n  t20 += v * b14;\n  t21 += v * b15;\n  v = a[7];\n  t7 += v * b0;\n  t8 += v * b1;\n  t9 += v * b2;\n  t10 += v * b3;\n  t11 += v * b4;\n  t12 += v * b5;\n  t13 += v * b6;\n  t14 += v * b7;\n  t15 += v * b8;\n  t16 += v * b9;\n  t17 += v * b10;\n  t18 += v * b11;\n  t19 += v * b12;\n  t20 += v * b13;\n  t21 += v * b14;\n  t22 += v * b15;\n  v = a[8];\n  t8 += v * b0;\n  t9 += v * b1;\n  t10 += v * b2;\n  t11 += v * b3;\n  t12 += v * b4;\n  t13 += v * b5;\n  t14 += v * b6;\n  t15 += v * b7;\n  t16 += v * b8;\n  t17 += v * b9;\n  t18 += v * b10;\n  t19 += v * b11;\n  t20 += v * b12;\n  t21 += v * b13;\n  t22 += v * b14;\n  t23 += v * b15;\n  v = a[9];\n  t9 += v * b0;\n  t10 += v * b1;\n  t11 += v * b2;\n  t12 += v * b3;\n  t13 += v * b4;\n  t14 += v * b5;\n  t15 += v * b6;\n  t16 += v * b7;\n  t17 += v * b8;\n  t18 += v * b9;\n  t19 += v * b10;\n  t20 += v * b11;\n  t21 += v * b12;\n  t22 += v * b13;\n  t23 += v * b14;\n  t24 += v * b15;\n  v = a[10];\n  t10 += v * b0;\n  t11 += v * b1;\n  t12 += v * b2;\n  t13 += v * b3;\n  t14 += v * b4;\n  t15 += v * b5;\n  t16 += v * b6;\n  t17 += v * b7;\n  t18 += v * b8;\n  t19 += v * b9;\n  t20 += v * b10;\n  t21 += v * b11;\n  t22 += v * b12;\n  t23 += v * b13;\n  t24 += v * b14;\n  t25 += v * b15;\n  v = a[11];\n  t11 += v * b0;\n  t12 += v * b1;\n  t13 += v * b2;\n  t14 += v * b3;\n  t15 += v * b4;\n  t16 += v * b5;\n  t17 += v * b6;\n  t18 += v * b7;\n  t19 += v * b8;\n  t20 += v * b9;\n  t21 += v * b10;\n  t22 += v * b11;\n  t23 += v * b12;\n  t24 += v * b13;\n  t25 += v * b14;\n  t26 += v * b15;\n  v = a[12];\n  t12 += v * b0;\n  t13 += v * b1;\n  t14 += v * b2;\n  t15 += v * b3;\n  t16 += v * b4;\n  t17 += v * b5;\n  t18 += v * b6;\n  t19 += v * b7;\n  t20 += v * b8;\n  t21 += v * b9;\n  t22 += v * b10;\n  t23 += v * b11;\n  t24 += v * b12;\n  t25 += v * b13;\n  t26 += v * b14;\n  t27 += v * b15;\n  v = a[13];\n  t13 += v * b0;\n  t14 += v * b1;\n  t15 += v * b2;\n  t16 += v * b3;\n  t17 += v * b4;\n  t18 += v * b5;\n  t19 += v * b6;\n  t20 += v * b7;\n  t21 += v * b8;\n  t22 += v * b9;\n  t23 += v * b10;\n  t24 += v * b11;\n  t25 += v * b12;\n  t26 += v * b13;\n  t27 += v * b14;\n  t28 += v * b15;\n  v = a[14];\n  t14 += v * b0;\n  t15 += v * b1;\n  t16 += v * b2;\n  t17 += v * b3;\n  t18 += v * b4;\n  t19 += v * b5;\n  t20 += v * b6;\n  t21 += v * b7;\n  t22 += v * b8;\n  t23 += v * b9;\n  t24 += v * b10;\n  t25 += v * b11;\n  t26 += v * b12;\n  t27 += v * b13;\n  t28 += v * b14;\n  t29 += v * b15;\n  v = a[15];\n  t15 += v * b0;\n  t16 += v * b1;\n  t17 += v * b2;\n  t18 += v * b3;\n  t19 += v * b4;\n  t20 += v * b5;\n  t21 += v * b6;\n  t22 += v * b7;\n  t23 += v * b8;\n  t24 += v * b9;\n  t25 += v * b10;\n  t26 += v * b11;\n  t27 += v * b12;\n  t28 += v * b13;\n  t29 += v * b14;\n  t30 += v * b15;\n\n  t0  += 38 * t16;\n  t1  += 38 * t17;\n  t2  += 38 * t18;\n  t3  += 38 * t19;\n  t4  += 38 * t20;\n  t5  += 38 * t21;\n  t6  += 38 * t22;\n  t7  += 38 * t23;\n  t8  += 38 * t24;\n  t9  += 38 * t25;\n  t10 += 38 * t26;\n  t11 += 38 * t27;\n  t12 += 38 * t28;\n  t13 += 38 * t29;\n  t14 += 38 * t30;\n  // t15 left as is\n\n  // first car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  // second car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  o[ 0] = t0;\n  o[ 1] = t1;\n  o[ 2] = t2;\n  o[ 3] = t3;\n  o[ 4] = t4;\n  o[ 5] = t5;\n  o[ 6] = t6;\n  o[ 7] = t7;\n  o[ 8] = t8;\n  o[ 9] = t9;\n  o[10] = t10;\n  o[11] = t11;\n  o[12] = t12;\n  o[13] = t13;\n  o[14] = t14;\n  o[15] = t15;\n}\n\nfunction S(o, a) {\n  M(o, a, a);\n}\n\nfunction inv25519(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 253; a >= 0; a--) {\n    S(c, c);\n    if(a !== 2 && a !== 4) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction pow2523(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 250; a >= 0; a--) {\n      S(c, c);\n      if(a !== 1) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction crypto_scalarmult(q, n, p) {\n  var z = new Uint8Array(32);\n  var x = new Float64Array(80), r, i;\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf();\n  for (i = 0; i < 31; i++) z[i] = n[i];\n  z[31]=(n[31]&127)|64;\n  z[0]&=248;\n  unpack25519(x,p);\n  for (i = 0; i < 16; i++) {\n    b[i]=x[i];\n    d[i]=a[i]=c[i]=0;\n  }\n  a[0]=d[0]=1;\n  for (i=254; i>=0; --i) {\n    r=(z[i>>>3]>>>(i&7))&1;\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n    A(e,a,c);\n    Z(a,a,c);\n    A(c,b,d);\n    Z(b,b,d);\n    S(d,e);\n    S(f,a);\n    M(a,c,a);\n    M(c,b,e);\n    A(e,a,c);\n    Z(a,a,c);\n    S(b,a);\n    Z(c,d,f);\n    M(a,c,_121665);\n    A(a,a,d);\n    M(c,c,a);\n    M(a,d,f);\n    M(d,b,x);\n    S(b,e);\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n  }\n  for (i = 0; i < 16; i++) {\n    x[i+16]=a[i];\n    x[i+32]=c[i];\n    x[i+48]=b[i];\n    x[i+64]=d[i];\n  }\n  var x32 = x.subarray(32);\n  var x16 = x.subarray(16);\n  inv25519(x32,x32);\n  M(x16,x16,x32);\n  pack25519(q,x16);\n  return 0;\n}\n\nfunction crypto_scalarmult_base(q, n) {\n  return crypto_scalarmult(q, n, _9);\n}\n\nfunction crypto_box_keypair(y, x) {\n  randombytes(x, 32);\n  return crypto_scalarmult_base(y, x);\n}\n\nfunction crypto_box_beforenm(k, y, x) {\n  var s = new Uint8Array(32);\n  crypto_scalarmult(s, x, y);\n  return crypto_core_hsalsa20(k, _0, s, sigma);\n}\n\nvar crypto_box_afternm = crypto_secretbox;\nvar crypto_box_open_afternm = crypto_secretbox_open;\n\nfunction crypto_box(c, m, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_afternm(c, m, d, n, k);\n}\n\nfunction crypto_box_open(m, c, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_open_afternm(m, c, d, n, k);\n}\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction crypto_hashblocks_hl(hh, hl, m, n) {\n  var wh = new Int32Array(16), wl = new Int32Array(16),\n      bh0, bh1, bh2, bh3, bh4, bh5, bh6, bh7,\n      bl0, bl1, bl2, bl3, bl4, bl5, bl6, bl7,\n      th, tl, i, j, h, l, a, b, c, d;\n\n  var ah0 = hh[0],\n      ah1 = hh[1],\n      ah2 = hh[2],\n      ah3 = hh[3],\n      ah4 = hh[4],\n      ah5 = hh[5],\n      ah6 = hh[6],\n      ah7 = hh[7],\n\n      al0 = hl[0],\n      al1 = hl[1],\n      al2 = hl[2],\n      al3 = hl[3],\n      al4 = hl[4],\n      al5 = hl[5],\n      al6 = hl[6],\n      al7 = hl[7];\n\n  var pos = 0;\n  while (n >= 128) {\n    for (i = 0; i < 16; i++) {\n      j = 8 * i + pos;\n      wh[i] = (m[j+0] << 24) | (m[j+1] << 16) | (m[j+2] << 8) | m[j+3];\n      wl[i] = (m[j+4] << 24) | (m[j+5] << 16) | (m[j+6] << 8) | m[j+7];\n    }\n    for (i = 0; i < 80; i++) {\n      bh0 = ah0;\n      bh1 = ah1;\n      bh2 = ah2;\n      bh3 = ah3;\n      bh4 = ah4;\n      bh5 = ah5;\n      bh6 = ah6;\n      bh7 = ah7;\n\n      bl0 = al0;\n      bl1 = al1;\n      bl2 = al2;\n      bl3 = al3;\n      bl4 = al4;\n      bl5 = al5;\n      bl6 = al6;\n      bl7 = al7;\n\n      // add\n      h = ah7;\n      l = al7;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma1\n      h = ((ah4 >>> 14) | (al4 << (32-14))) ^ ((ah4 >>> 18) | (al4 << (32-18))) ^ ((al4 >>> (41-32)) | (ah4 << (32-(41-32))));\n      l = ((al4 >>> 14) | (ah4 << (32-14))) ^ ((al4 >>> 18) | (ah4 << (32-18))) ^ ((ah4 >>> (41-32)) | (al4 << (32-(41-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Ch\n      h = (ah4 & ah5) ^ (~ah4 & ah6);\n      l = (al4 & al5) ^ (~al4 & al6);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // K\n      h = K[i*2];\n      l = K[i*2+1];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // w\n      h = wh[i%16];\n      l = wl[i%16];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      th = c & 0xffff | d << 16;\n      tl = a & 0xffff | b << 16;\n\n      // add\n      h = th;\n      l = tl;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma0\n      h = ((ah0 >>> 28) | (al0 << (32-28))) ^ ((al0 >>> (34-32)) | (ah0 << (32-(34-32)))) ^ ((al0 >>> (39-32)) | (ah0 << (32-(39-32))));\n      l = ((al0 >>> 28) | (ah0 << (32-28))) ^ ((ah0 >>> (34-32)) | (al0 << (32-(34-32)))) ^ ((ah0 >>> (39-32)) | (al0 << (32-(39-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Maj\n      h = (ah0 & ah1) ^ (ah0 & ah2) ^ (ah1 & ah2);\n      l = (al0 & al1) ^ (al0 & al2) ^ (al1 & al2);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh7 = (c & 0xffff) | (d << 16);\n      bl7 = (a & 0xffff) | (b << 16);\n\n      // add\n      h = bh3;\n      l = bl3;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      h = th;\n      l = tl;\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh3 = (c & 0xffff) | (d << 16);\n      bl3 = (a & 0xffff) | (b << 16);\n\n      ah1 = bh0;\n      ah2 = bh1;\n      ah3 = bh2;\n      ah4 = bh3;\n      ah5 = bh4;\n      ah6 = bh5;\n      ah7 = bh6;\n      ah0 = bh7;\n\n      al1 = bl0;\n      al2 = bl1;\n      al3 = bl2;\n      al4 = bl3;\n      al5 = bl4;\n      al6 = bl5;\n      al7 = bl6;\n      al0 = bl7;\n\n      if (i%16 === 15) {\n        for (j = 0; j < 16; j++) {\n          // add\n          h = wh[j];\n          l = wl[j];\n\n          a = l & 0xffff; b = l >>> 16;\n          c = h & 0xffff; d = h >>> 16;\n\n          h = wh[(j+9)%16];\n          l = wl[(j+9)%16];\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma0\n          th = wh[(j+1)%16];\n          tl = wl[(j+1)%16];\n          h = ((th >>> 1) | (tl << (32-1))) ^ ((th >>> 8) | (tl << (32-8))) ^ (th >>> 7);\n          l = ((tl >>> 1) | (th << (32-1))) ^ ((tl >>> 8) | (th << (32-8))) ^ ((tl >>> 7) | (th << (32-7)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma1\n          th = wh[(j+14)%16];\n          tl = wl[(j+14)%16];\n          h = ((th >>> 19) | (tl << (32-19))) ^ ((tl >>> (61-32)) | (th << (32-(61-32)))) ^ (th >>> 6);\n          l = ((tl >>> 19) | (th << (32-19))) ^ ((th >>> (61-32)) | (tl << (32-(61-32)))) ^ ((tl >>> 6) | (th << (32-6)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          b += a >>> 16;\n          c += b >>> 16;\n          d += c >>> 16;\n\n          wh[j] = (c & 0xffff) | (d << 16);\n          wl[j] = (a & 0xffff) | (b << 16);\n        }\n      }\n    }\n\n    // add\n    h = ah0;\n    l = al0;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[0];\n    l = hl[0];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[0] = ah0 = (c & 0xffff) | (d << 16);\n    hl[0] = al0 = (a & 0xffff) | (b << 16);\n\n    h = ah1;\n    l = al1;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[1];\n    l = hl[1];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[1] = ah1 = (c & 0xffff) | (d << 16);\n    hl[1] = al1 = (a & 0xffff) | (b << 16);\n\n    h = ah2;\n    l = al2;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[2];\n    l = hl[2];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[2] = ah2 = (c & 0xffff) | (d << 16);\n    hl[2] = al2 = (a & 0xffff) | (b << 16);\n\n    h = ah3;\n    l = al3;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[3];\n    l = hl[3];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[3] = ah3 = (c & 0xffff) | (d << 16);\n    hl[3] = al3 = (a & 0xffff) | (b << 16);\n\n    h = ah4;\n    l = al4;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[4];\n    l = hl[4];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[4] = ah4 = (c & 0xffff) | (d << 16);\n    hl[4] = al4 = (a & 0xffff) | (b << 16);\n\n    h = ah5;\n    l = al5;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[5];\n    l = hl[5];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[5] = ah5 = (c & 0xffff) | (d << 16);\n    hl[5] = al5 = (a & 0xffff) | (b << 16);\n\n    h = ah6;\n    l = al6;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[6];\n    l = hl[6];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[6] = ah6 = (c & 0xffff) | (d << 16);\n    hl[6] = al6 = (a & 0xffff) | (b << 16);\n\n    h = ah7;\n    l = al7;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[7];\n    l = hl[7];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[7] = ah7 = (c & 0xffff) | (d << 16);\n    hl[7] = al7 = (a & 0xffff) | (b << 16);\n\n    pos += 128;\n    n -= 128;\n  }\n\n  return n;\n}\n\nfunction crypto_hash(out, m, n) {\n  var hh = new Int32Array(8),\n      hl = new Int32Array(8),\n      x = new Uint8Array(256),\n      i, b = n;\n\n  hh[0] = 0x6a09e667;\n  hh[1] = 0xbb67ae85;\n  hh[2] = 0x3c6ef372;\n  hh[3] = 0xa54ff53a;\n  hh[4] = 0x510e527f;\n  hh[5] = 0x9b05688c;\n  hh[6] = 0x1f83d9ab;\n  hh[7] = 0x5be0cd19;\n\n  hl[0] = 0xf3bcc908;\n  hl[1] = 0x84caa73b;\n  hl[2] = 0xfe94f82b;\n  hl[3] = 0x5f1d36f1;\n  hl[4] = 0xade682d1;\n  hl[5] = 0x2b3e6c1f;\n  hl[6] = 0xfb41bd6b;\n  hl[7] = 0x137e2179;\n\n  crypto_hashblocks_hl(hh, hl, m, n);\n  n %= 128;\n\n  for (i = 0; i < n; i++) x[i] = m[b-n+i];\n  x[n] = 128;\n\n  n = 256-128*(n<112?1:0);\n  x[n-9] = 0;\n  ts64(x, n-8,  (b / 0x20000000) | 0, b << 3);\n  crypto_hashblocks_hl(hh, hl, x, n);\n\n  for (i = 0; i < 8; i++) ts64(out, 8*i, hh[i], hl[i]);\n\n  return 0;\n}\n\nfunction add(p, q) {\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf(),\n      g = gf(), h = gf(), t = gf();\n\n  Z(a, p[1], p[0]);\n  Z(t, q[1], q[0]);\n  M(a, a, t);\n  A(b, p[0], p[1]);\n  A(t, q[0], q[1]);\n  M(b, b, t);\n  M(c, p[3], q[3]);\n  M(c, c, D2);\n  M(d, p[2], q[2]);\n  A(d, d, d);\n  Z(e, b, a);\n  Z(f, d, c);\n  A(g, d, c);\n  A(h, b, a);\n\n  M(p[0], e, f);\n  M(p[1], h, g);\n  M(p[2], g, f);\n  M(p[3], e, h);\n}\n\nfunction cswap(p, q, b) {\n  var i;\n  for (i = 0; i < 4; i++) {\n    sel25519(p[i], q[i], b);\n  }\n}\n\nfunction pack(r, p) {\n  var tx = gf(), ty = gf(), zi = gf();\n  inv25519(zi, p[2]);\n  M(tx, p[0], zi);\n  M(ty, p[1], zi);\n  pack25519(r, ty);\n  r[31] ^= par25519(tx) << 7;\n}\n\nfunction scalarmult(p, q, s) {\n  var b, i;\n  set25519(p[0], gf0);\n  set25519(p[1], gf1);\n  set25519(p[2], gf1);\n  set25519(p[3], gf0);\n  for (i = 255; i >= 0; --i) {\n    b = (s[(i/8)|0] >> (i&7)) & 1;\n    cswap(p, q, b);\n    add(q, p);\n    add(p, p);\n    cswap(p, q, b);\n  }\n}\n\nfunction scalarbase(p, s) {\n  var q = [gf(), gf(), gf(), gf()];\n  set25519(q[0], X);\n  set25519(q[1], Y);\n  set25519(q[2], gf1);\n  M(q[3], X, Y);\n  scalarmult(p, q, s);\n}\n\nfunction crypto_sign_keypair(pk, sk, seeded) {\n  var d = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n  var i;\n\n  if (!seeded) randombytes(sk, 32);\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  scalarbase(p, d);\n  pack(pk, p);\n\n  for (i = 0; i < 32; i++) sk[i+32] = pk[i];\n  return 0;\n}\n\nvar L = new Float64Array([0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58, 0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10]);\n\nfunction modL(r, x) {\n  var carry, i, j, k;\n  for (i = 63; i >= 32; --i) {\n    carry = 0;\n    for (j = i - 32, k = i - 12; j < k; ++j) {\n      x[j] += carry - 16 * x[i] * L[j - (i - 32)];\n      carry = (x[j] + 128) >> 8;\n      x[j] -= carry * 256;\n    }\n    x[j] += carry;\n    x[i] = 0;\n  }\n  carry = 0;\n  for (j = 0; j < 32; j++) {\n    x[j] += carry - (x[31] >> 4) * L[j];\n    carry = x[j] >> 8;\n    x[j] &= 255;\n  }\n  for (j = 0; j < 32; j++) x[j] -= carry * L[j];\n  for (i = 0; i < 32; i++) {\n    x[i+1] += x[i] >> 8;\n    r[i] = x[i] & 255;\n  }\n}\n\nfunction reduce(r) {\n  var x = new Float64Array(64), i;\n  for (i = 0; i < 64; i++) x[i] = r[i];\n  for (i = 0; i < 64; i++) r[i] = 0;\n  modL(r, x);\n}\n\n// Note: difference from C - smlen returned, not passed as argument.\nfunction crypto_sign(sm, m, n, sk) {\n  var d = new Uint8Array(64), h = new Uint8Array(64), r = new Uint8Array(64);\n  var i, j, x = new Float64Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  var smlen = n + 64;\n  for (i = 0; i < n; i++) sm[64 + i] = m[i];\n  for (i = 0; i < 32; i++) sm[32 + i] = d[32 + i];\n\n  crypto_hash(r, sm.subarray(32), n+32);\n  reduce(r);\n  scalarbase(p, r);\n  pack(sm, p);\n\n  for (i = 32; i < 64; i++) sm[i] = sk[i];\n  crypto_hash(h, sm, n + 64);\n  reduce(h);\n\n  for (i = 0; i < 64; i++) x[i] = 0;\n  for (i = 0; i < 32; i++) x[i] = r[i];\n  for (i = 0; i < 32; i++) {\n    for (j = 0; j < 32; j++) {\n      x[i+j] += h[i] * d[j];\n    }\n  }\n\n  modL(sm.subarray(32), x);\n  return smlen;\n}\n\nfunction unpackneg(r, p) {\n  var t = gf(), chk = gf(), num = gf(),\n      den = gf(), den2 = gf(), den4 = gf(),\n      den6 = gf();\n\n  set25519(r[2], gf1);\n  unpack25519(r[1], p);\n  S(num, r[1]);\n  M(den, num, D);\n  Z(num, num, r[2]);\n  A(den, r[2], den);\n\n  S(den2, den);\n  S(den4, den2);\n  M(den6, den4, den2);\n  M(t, den6, num);\n  M(t, t, den);\n\n  pow2523(t, t);\n  M(t, t, num);\n  M(t, t, den);\n  M(t, t, den);\n  M(r[0], t, den);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) M(r[0], r[0], I);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) return -1;\n\n  if (par25519(r[0]) === (p[31]>>7)) Z(r[0], gf0, r[0]);\n\n  M(r[3], r[0], r[1]);\n  return 0;\n}\n\nfunction crypto_sign_open(m, sm, n, pk) {\n  var i;\n  var t = new Uint8Array(32), h = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()],\n      q = [gf(), gf(), gf(), gf()];\n\n  if (n < 64) return -1;\n\n  if (unpackneg(q, pk)) return -1;\n\n  for (i = 0; i < n; i++) m[i] = sm[i];\n  for (i = 0; i < 32; i++) m[i+32] = pk[i];\n  crypto_hash(h, m, n);\n  reduce(h);\n  scalarmult(p, q, h);\n\n  scalarbase(q, sm.subarray(32));\n  add(p, q);\n  pack(t, p);\n\n  n -= 64;\n  if (crypto_verify_32(sm, 0, t, 0)) {\n    for (i = 0; i < n; i++) m[i] = 0;\n    return -1;\n  }\n\n  for (i = 0; i < n; i++) m[i] = sm[i + 64];\n  return n;\n}\n\nvar crypto_secretbox_KEYBYTES = 32,\n    crypto_secretbox_NONCEBYTES = 24,\n    crypto_secretbox_ZEROBYTES = 32,\n    crypto_secretbox_BOXZEROBYTES = 16,\n    crypto_scalarmult_BYTES = 32,\n    crypto_scalarmult_SCALARBYTES = 32,\n    crypto_box_PUBLICKEYBYTES = 32,\n    crypto_box_SECRETKEYBYTES = 32,\n    crypto_box_BEFORENMBYTES = 32,\n    crypto_box_NONCEBYTES = crypto_secretbox_NONCEBYTES,\n    crypto_box_ZEROBYTES = crypto_secretbox_ZEROBYTES,\n    crypto_box_BOXZEROBYTES = crypto_secretbox_BOXZEROBYTES,\n    crypto_sign_BYTES = 64,\n    crypto_sign_PUBLICKEYBYTES = 32,\n    crypto_sign_SECRETKEYBYTES = 64,\n    crypto_sign_SEEDBYTES = 32,\n    crypto_hash_BYTES = 64;\n\nnacl.lowlevel = {\n  crypto_core_hsalsa20: crypto_core_hsalsa20,\n  crypto_stream_xor: crypto_stream_xor,\n  crypto_stream: crypto_stream,\n  crypto_stream_salsa20_xor: crypto_stream_salsa20_xor,\n  crypto_stream_salsa20: crypto_stream_salsa20,\n  crypto_onetimeauth: crypto_onetimeauth,\n  crypto_onetimeauth_verify: crypto_onetimeauth_verify,\n  crypto_verify_16: crypto_verify_16,\n  crypto_verify_32: crypto_verify_32,\n  crypto_secretbox: crypto_secretbox,\n  crypto_secretbox_open: crypto_secretbox_open,\n  crypto_scalarmult: crypto_scalarmult,\n  crypto_scalarmult_base: crypto_scalarmult_base,\n  crypto_box_beforenm: crypto_box_beforenm,\n  crypto_box_afternm: crypto_box_afternm,\n  crypto_box: crypto_box,\n  crypto_box_open: crypto_box_open,\n  crypto_box_keypair: crypto_box_keypair,\n  crypto_hash: crypto_hash,\n  crypto_sign: crypto_sign,\n  crypto_sign_keypair: crypto_sign_keypair,\n  crypto_sign_open: crypto_sign_open,\n\n  crypto_secretbox_KEYBYTES: crypto_secretbox_KEYBYTES,\n  crypto_secretbox_NONCEBYTES: crypto_secretbox_NONCEBYTES,\n  crypto_secretbox_ZEROBYTES: crypto_secretbox_ZEROBYTES,\n  crypto_secretbox_BOXZEROBYTES: crypto_secretbox_BOXZEROBYTES,\n  crypto_scalarmult_BYTES: crypto_scalarmult_BYTES,\n  crypto_scalarmult_SCALARBYTES: crypto_scalarmult_SCALARBYTES,\n  crypto_box_PUBLICKEYBYTES: crypto_box_PUBLICKEYBYTES,\n  crypto_box_SECRETKEYBYTES: crypto_box_SECRETKEYBYTES,\n  crypto_box_BEFORENMBYTES: crypto_box_BEFORENMBYTES,\n  crypto_box_NONCEBYTES: crypto_box_NONCEBYTES,\n  crypto_box_ZEROBYTES: crypto_box_ZEROBYTES,\n  crypto_box_BOXZEROBYTES: crypto_box_BOXZEROBYTES,\n  crypto_sign_BYTES: crypto_sign_BYTES,\n  crypto_sign_PUBLICKEYBYTES: crypto_sign_PUBLICKEYBYTES,\n  crypto_sign_SECRETKEYBYTES: crypto_sign_SECRETKEYBYTES,\n  crypto_sign_SEEDBYTES: crypto_sign_SEEDBYTES,\n  crypto_hash_BYTES: crypto_hash_BYTES,\n\n  gf: gf,\n  D: D,\n  L: L,\n  pack25519: pack25519,\n  unpack25519: unpack25519,\n  M: M,\n  A: A,\n  S: S,\n  Z: Z,\n  pow2523: pow2523,\n  add: add,\n  set25519: set25519,\n  modL: modL,\n  scalarmult: scalarmult,\n  scalarbase: scalarbase,\n};\n\n/* High-level API */\n\nfunction checkLengths(k, n) {\n  if (k.length !== crypto_secretbox_KEYBYTES) throw new Error('bad key size');\n  if (n.length !== crypto_secretbox_NONCEBYTES) throw new Error('bad nonce size');\n}\n\nfunction checkBoxLengths(pk, sk) {\n  if (pk.length !== crypto_box_PUBLICKEYBYTES) throw new Error('bad public key size');\n  if (sk.length !== crypto_box_SECRETKEYBYTES) throw new Error('bad secret key size');\n}\n\nfunction checkArrayTypes() {\n  for (var i = 0; i < arguments.length; i++) {\n    if (!(arguments[i] instanceof Uint8Array))\n      throw new TypeError('unexpected type, use Uint8Array');\n  }\n}\n\nfunction cleanup(arr) {\n  for (var i = 0; i < arr.length; i++) arr[i] = 0;\n}\n\nnacl.randomBytes = function(n) {\n  var b = new Uint8Array(n);\n  randombytes(b, n);\n  return b;\n};\n\nnacl.secretbox = function(msg, nonce, key) {\n  checkArrayTypes(msg, nonce, key);\n  checkLengths(key, nonce);\n  var m = new Uint8Array(crypto_secretbox_ZEROBYTES + msg.length);\n  var c = new Uint8Array(m.length);\n  for (var i = 0; i < msg.length; i++) m[i+crypto_secretbox_ZEROBYTES] = msg[i];\n  crypto_secretbox(c, m, m.length, nonce, key);\n  return c.subarray(crypto_secretbox_BOXZEROBYTES);\n};\n\nnacl.secretbox.open = function(box, nonce, key) {\n  checkArrayTypes(box, nonce, key);\n  checkLengths(key, nonce);\n  var c = new Uint8Array(crypto_secretbox_BOXZEROBYTES + box.length);\n  var m = new Uint8Array(c.length);\n  for (var i = 0; i < box.length; i++) c[i+crypto_secretbox_BOXZEROBYTES] = box[i];\n  if (c.length < 32) return null;\n  if (crypto_secretbox_open(m, c, c.length, nonce, key) !== 0) return null;\n  return m.subarray(crypto_secretbox_ZEROBYTES);\n};\n\nnacl.secretbox.keyLength = crypto_secretbox_KEYBYTES;\nnacl.secretbox.nonceLength = crypto_secretbox_NONCEBYTES;\nnacl.secretbox.overheadLength = crypto_secretbox_BOXZEROBYTES;\n\nnacl.scalarMult = function(n, p) {\n  checkArrayTypes(n, p);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  if (p.length !== crypto_scalarmult_BYTES) throw new Error('bad p size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult(q, n, p);\n  return q;\n};\n\nnacl.scalarMult.base = function(n) {\n  checkArrayTypes(n);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult_base(q, n);\n  return q;\n};\n\nnacl.scalarMult.scalarLength = crypto_scalarmult_SCALARBYTES;\nnacl.scalarMult.groupElementLength = crypto_scalarmult_BYTES;\n\nnacl.box = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox(msg, nonce, k);\n};\n\nnacl.box.before = function(publicKey, secretKey) {\n  checkArrayTypes(publicKey, secretKey);\n  checkBoxLengths(publicKey, secretKey);\n  var k = new Uint8Array(crypto_box_BEFORENMBYTES);\n  crypto_box_beforenm(k, publicKey, secretKey);\n  return k;\n};\n\nnacl.box.after = nacl.secretbox;\n\nnacl.box.open = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox.open(msg, nonce, k);\n};\n\nnacl.box.open.after = nacl.secretbox.open;\n\nnacl.box.keyPair = function() {\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_box_SECRETKEYBYTES);\n  crypto_box_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.box.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_box_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  crypto_scalarmult_base(pk, secretKey);\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.box.publicKeyLength = crypto_box_PUBLICKEYBYTES;\nnacl.box.secretKeyLength = crypto_box_SECRETKEYBYTES;\nnacl.box.sharedKeyLength = crypto_box_BEFORENMBYTES;\nnacl.box.nonceLength = crypto_box_NONCEBYTES;\nnacl.box.overheadLength = nacl.secretbox.overheadLength;\n\nnacl.sign = function(msg, secretKey) {\n  checkArrayTypes(msg, secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var signedMsg = new Uint8Array(crypto_sign_BYTES+msg.length);\n  crypto_sign(signedMsg, msg, msg.length, secretKey);\n  return signedMsg;\n};\n\nnacl.sign.open = function(signedMsg, publicKey) {\n  checkArrayTypes(signedMsg, publicKey);\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var tmp = new Uint8Array(signedMsg.length);\n  var mlen = crypto_sign_open(tmp, signedMsg, signedMsg.length, publicKey);\n  if (mlen < 0) return null;\n  var m = new Uint8Array(mlen);\n  for (var i = 0; i < m.length; i++) m[i] = tmp[i];\n  return m;\n};\n\nnacl.sign.detached = function(msg, secretKey) {\n  var signedMsg = nacl.sign(msg, secretKey);\n  var sig = new Uint8Array(crypto_sign_BYTES);\n  for (var i = 0; i < sig.length; i++) sig[i] = signedMsg[i];\n  return sig;\n};\n\nnacl.sign.detached.verify = function(msg, sig, publicKey) {\n  checkArrayTypes(msg, sig, publicKey);\n  if (sig.length !== crypto_sign_BYTES)\n    throw new Error('bad signature size');\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var sm = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var m = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var i;\n  for (i = 0; i < crypto_sign_BYTES; i++) sm[i] = sig[i];\n  for (i = 0; i < msg.length; i++) sm[i+crypto_sign_BYTES] = msg[i];\n  return (crypto_sign_open(m, sm, sm.length, publicKey) >= 0);\n};\n\nnacl.sign.keyPair = function() {\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  crypto_sign_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  for (var i = 0; i < pk.length; i++) pk[i] = secretKey[32+i];\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.sign.keyPair.fromSeed = function(seed) {\n  checkArrayTypes(seed);\n  if (seed.length !== crypto_sign_SEEDBYTES)\n    throw new Error('bad seed size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  for (var i = 0; i < 32; i++) sk[i] = seed[i];\n  crypto_sign_keypair(pk, sk, true);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.publicKeyLength = crypto_sign_PUBLICKEYBYTES;\nnacl.sign.secretKeyLength = crypto_sign_SECRETKEYBYTES;\nnacl.sign.seedLength = crypto_sign_SEEDBYTES;\nnacl.sign.signatureLength = crypto_sign_BYTES;\n\nnacl.hash = function(msg) {\n  checkArrayTypes(msg);\n  var h = new Uint8Array(crypto_hash_BYTES);\n  crypto_hash(h, msg, msg.length);\n  return h;\n};\n\nnacl.hash.hashLength = crypto_hash_BYTES;\n\nnacl.verify = function(x, y) {\n  checkArrayTypes(x, y);\n  // Zero length arguments are considered not equal.\n  if (x.length === 0 || y.length === 0) return false;\n  if (x.length !== y.length) return false;\n  return (vn(x, 0, y, 0, x.length) === 0) ? true : false;\n};\n\nnacl.setPRNG = function(fn) {\n  randombytes = fn;\n};\n\n(function() {\n  // Initialize PRNG if environment provides CSPRNG.\n  // If not, methods calling randombytes will throw.\n  var crypto = typeof self !== 'undefined' ? (self.crypto || self.msCrypto) : null;\n  if (crypto && crypto.getRandomValues) {\n    // Browsers.\n    var QUOTA = 65536;\n    nacl.setPRNG(function(x, n) {\n      var i, v = new Uint8Array(n);\n      for (i = 0; i < n; i += QUOTA) {\n        crypto.getRandomValues(v.subarray(i, i + Math.min(n - i, QUOTA)));\n      }\n      for (i = 0; i < n; i++) x[i] = v[i];\n      cleanup(v);\n    });\n  } else if (typeof require !== 'undefined') {\n    // Node.js.\n    crypto = require('crypto');\n    if (crypto && crypto.randomBytes) {\n      nacl.setPRNG(function(x, n) {\n        var i, v = crypto.randomBytes(n);\n        for (i = 0; i < n; i++) x[i] = v[i];\n        cleanup(v);\n      });\n    }\n  }\n})();\n\n})(typeof module !== 'undefined' && module.exports ? module.exports : (self.nacl = self.nacl || {}));\n","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CBOR = require(\"@wireapp/cbor\");\nconst sodium = require(\"libsodium-wrappers-sumo\");\nconst ClassUtil = require(\"../util/ClassUtil\");\nconst IdentityKey_1 = require(\"./IdentityKey\");\nconst PreKeyAuth_1 = require(\"./PreKeyAuth\");\nconst PublicKey_1 = require(\"./PublicKey\");\nclass PreKeyBundle {\n    constructor() {\n        this.version = -1;\n        this.prekey_id = -1;\n        this.public_key = new PublicKey_1.PublicKey();\n        this.identity_key = new IdentityKey_1.IdentityKey();\n        this.signature = null;\n    }\n    static new(public_identity_key, prekey) {\n        const bundle = ClassUtil.new_instance(PreKeyBundle);\n        bundle.version = 1;\n        bundle.prekey_id = prekey.key_id;\n        bundle.public_key = prekey.key_pair.public_key;\n        bundle.identity_key = public_identity_key;\n        bundle.signature = null;\n        return bundle;\n    }\n    static signed(identity_pair, prekey) {\n        const ratchet_key = prekey.key_pair.public_key;\n        const signature = identity_pair.secret_key.sign(ratchet_key.pub_edward);\n        const bundle = ClassUtil.new_instance(PreKeyBundle);\n        bundle.version = 1;\n        bundle.prekey_id = prekey.key_id;\n        bundle.public_key = ratchet_key;\n        bundle.identity_key = identity_pair.public_key;\n        bundle.signature = signature;\n        return bundle;\n    }\n    verify() {\n        if (!this.signature) {\n            return PreKeyAuth_1.PreKeyAuth.UNKNOWN;\n        }\n        if (this.identity_key.public_key.verify(this.signature, this.public_key.pub_edward)) {\n            return PreKeyAuth_1.PreKeyAuth.VALID;\n        }\n        return PreKeyAuth_1.PreKeyAuth.INVALID;\n    }\n    serialise() {\n        const encoder = new CBOR.Encoder();\n        this.encode(encoder);\n        return encoder.get_buffer();\n    }\n    serialised_json() {\n        return {\n            id: this.prekey_id,\n            key: sodium.to_base64(new Uint8Array(this.serialise()), sodium.base64_variants.ORIGINAL),\n        };\n    }\n    static deserialise(buf) {\n        return PreKeyBundle.decode(new CBOR.Decoder(buf));\n    }\n    encode(encoder) {\n        encoder.object(5);\n        encoder.u8(0);\n        encoder.u8(this.version);\n        encoder.u8(1);\n        encoder.u16(this.prekey_id);\n        encoder.u8(2);\n        this.public_key.encode(encoder);\n        encoder.u8(3);\n        this.identity_key.encode(encoder);\n        encoder.u8(4);\n        if (!this.signature) {\n            return encoder.null();\n        }\n        return encoder.bytes(this.signature);\n    }\n    static decode(decoder) {\n        const self = ClassUtil.new_instance(PreKeyBundle);\n        const nprops = decoder.object();\n        for (let index = 0; index <= nprops - 1; index++) {\n            switch (decoder.u8()) {\n                case 0:\n                    self.version = decoder.u8();\n                    break;\n                case 1:\n                    self.prekey_id = decoder.u16();\n                    break;\n                case 2:\n                    self.public_key = PublicKey_1.PublicKey.decode(decoder);\n                    break;\n                case 3:\n                    self.identity_key = IdentityKey_1.IdentityKey.decode(decoder);\n                    break;\n                case 4:\n                    self.signature = decoder.optional(() => new Uint8Array(decoder.bytes()));\n                    break;\n                default:\n                    decoder.skip();\n            }\n        }\n        return self;\n    }\n}\nexports.PreKeyBundle = PreKeyBundle;\n//# sourceMappingURL=PreKeyBundle.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./CipherMessage\"));\n__export(require(\"./Envelope\"));\n__export(require(\"./Message\"));\n__export(require(\"./PreKeyMessage\"));\n__export(require(\"./SessionTag\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./ChainKey\"));\n__export(require(\"./MessageKeys\"));\n__export(require(\"./PreKeyStore\"));\n__export(require(\"./RecvChain\"));\n__export(require(\"./RootKey\"));\n__export(require(\"./SendChain\"));\n__export(require(\"./Session\"));\n__export(require(\"./SessionState\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass PreKeyStore {\n}\nexports.PreKeyStore = PreKeyStore;\n//# sourceMappingURL=PreKeyStore.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ArrayUtil = require(\"./ArrayUtil\");\nexports.ArrayUtil = ArrayUtil;\nconst ClassUtil = require(\"./ClassUtil\");\nexports.ClassUtil = ClassUtil;\nconst KeyDerivationUtil = require(\"./KeyDerivationUtil\");\nexports.KeyDerivationUtil = KeyDerivationUtil;\nconst MemoryUtil = require(\"./MemoryUtil\");\nexports.MemoryUtil = MemoryUtil;\nconst RandomUtil = require(\"./RandomUtil\");\nexports.RandomUtil = RandomUtil;\nconst WASMUtil = require(\"./WASMUtil\");\nexports.WASMUtil = WASMUtil;\n//# sourceMappingURL=index.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2019 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sodium = require(\"libsodium-wrappers-sumo\");\nexports.isUsingWASM = () => __awaiter(void 0, void 0, void 0, function* () {\n    yield sodium.ready;\n    const rawLibsodium = sodium.libsodium;\n    return Boolean(rawLibsodium.usesWasm) || Boolean(rawLibsodium.useBackupModule);\n});\n//# sourceMappingURL=WASMUtil.js.map"],"sourceRoot":""}