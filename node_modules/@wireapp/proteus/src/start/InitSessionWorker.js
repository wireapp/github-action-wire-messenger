"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const worker_threads_1 = require("worker_threads");
const Session_1 = require("../session/Session");
const initProteus_1 = require("../initProteus");
async function createSessions(ownIdentity, preKeyBundles) {
    await initProteus_1.initProteus();
    return preKeyBundles.map(pkb => Session_1.Session.init_from_prekey(ownIdentity, pkb));
}
worker_threads_1.parentPort === null || worker_threads_1.parentPort === void 0 ? void 0 : worker_threads_1.parentPort.on('message', async (message) => {
    const { ownIdentity, preKeyBundles } = message.value;
    const sessions = await createSessions(ownIdentity, preKeyBundles);
    message.port.postMessage(sessions);
    message.port.close();
});
//# sourceMappingURL=InitSessionWorker.js.map