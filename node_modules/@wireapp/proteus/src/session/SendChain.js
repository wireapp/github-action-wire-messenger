"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SendChain = void 0;
const DecodeError_1 = require("../errors/DecodeError");
const KeyPair_1 = require("../keys/KeyPair");
const ChainKey_1 = require("./ChainKey");
class SendChain {
    constructor(chainKey, keypair) {
        this.chain_key = chainKey;
        this.ratchet_key = keypair;
    }
    static encode(encoder, sendChain) {
        encoder.object(SendChain.propertiesLength);
        encoder.u8(0);
        ChainKey_1.ChainKey.encode(encoder, sendChain.chain_key);
        encoder.u8(1);
        return KeyPair_1.KeyPair.encode(encoder, sendChain.ratchet_key);
    }
    static decode(decoder) {
        const propertiesLength = decoder.object();
        if (propertiesLength === SendChain.propertiesLength) {
            decoder.u8();
            const chainKey = ChainKey_1.ChainKey.decode(decoder);
            decoder.u8();
            const ratchetKey = KeyPair_1.KeyPair.decode(decoder);
            return new SendChain(chainKey, ratchetKey);
        }
        throw new DecodeError_1.DecodeError(`Unexpected number of properties: "${propertiesLength}"`);
    }
}
exports.SendChain = SendChain;
SendChain.propertiesLength = 2;
//# sourceMappingURL=SendChain.js.map