import type { APIClient } from '@wireapp/api-client';
import type { PreKey as SerializedPreKey } from '@wireapp/api-client/src/auth/';
import type { RegisteredClient } from '@wireapp/api-client/src/client/';
import type { OTRRecipients, QualifiedOTRRecipients } from '@wireapp/api-client/src/conversation/';
import type { ConversationOtrMessageAddEvent } from '@wireapp/api-client/src/event';
import type { QualifiedUserPreKeyBundleMap, UserPreKeyBundleMap } from '@wireapp/api-client/src/user/';
import { Cryptobox } from '@wireapp/cryptobox';
import type { CRUDEngine } from '@wireapp/store-engine';
import { PayloadBundle, PayloadBundleSource } from '../conversation';
export interface MetaClient extends RegisteredClient {
    meta: {
        is_verified?: boolean;
        primary_key: string;
    };
}
export declare class CryptographyService {
    readonly apiClient: APIClient;
    private readonly storeEngine;
    private readonly logger;
    cryptobox: Cryptobox;
    private readonly database;
    constructor(apiClient: APIClient, storeEngine: CRUDEngine);
    static constructSessionId(userId: string, clientId: string): string;
    static convertArrayRecipientsToBase64(recipients: OTRRecipients<Uint8Array>): OTRRecipients<string>;
    static convertBase64RecipientsToArray(recipients: OTRRecipients<string>): OTRRecipients<Uint8Array>;
    createCryptobox(): Promise<SerializedPreKey[]>;
    decrypt(sessionId: string, encodedCiphertext: string): Promise<Uint8Array>;
    private static dismantleSessionId;
    encryptQualified(plainText: Uint8Array, preKeyBundles: QualifiedUserPreKeyBundleMap): Promise<QualifiedOTRRecipients>;
    encrypt(plainText: Uint8Array, preKeyBundles: UserPreKeyBundleMap): Promise<OTRRecipients<Uint8Array>>;
    private encryptPayloadForSession;
    initCryptobox(): Promise<void>;
    deleteCryptographyStores(): Promise<boolean[]>;
    resetSession(sessionId: string): Promise<void>;
    decodeGenericMessage(otrMessage: ConversationOtrMessageAddEvent, source: PayloadBundleSource): Promise<PayloadBundle>;
}
