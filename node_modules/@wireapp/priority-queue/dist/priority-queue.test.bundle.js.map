{"version":3,"sources":["webpack://PriorityQueue/webpack/bootstrap","webpack://PriorityQueue/./dist/index.js","webpack://PriorityQueue/./dist/Priority.js","webpack://PriorityQueue/./dist/Item.js","webpack://PriorityQueue/./dist/PriorityQueue.js","webpack://PriorityQueue//home/travis/build/wireapp/wire-web-packages/node_modules/logdown/dist/logdown.min.js","webpack://PriorityQueue/./src/test/browser/index.js","webpack://PriorityQueue/./src/test/browser sync test\\.js$","webpack://PriorityQueue/./src/test/browser/PriorityQueue.test.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__createBinding","this","k","k2","undefined","__exportStar","Priority","Item","Priority_1","fn","priority","MEDIUM","reject","resolve","retry","Infinity","timestamp","label","toString","replace","__awaiter","thisArg","_arguments","P","generator","Promise","fulfilled","step","next","e","rejected","result","done","then","apply","__importDefault","mod","PriorityQueue","logdown_1","Item_1","config","logger","default","console","markdown","comparator","a","b","maxRetries","maxRetryDelay","Number","MAX_SAFE_INTEGER","retryDelay","retryGrowthFactor","isRunning","queue","assign","thunkedPromise","queueObject","Date","now","size","push","sort","processList","filter","item","length","first","shift","error","log","setTimeout","getGrowingDelay","currentRetry","delay","Math","min","map","index","join","window","f","prefixColors","_setPrefixRegExps","localStorage","getItem","_prefixRegExps","split","forEach","trim","substr","_prepareRegExpForPrefixSearch","type","regExp","_getNextPrefixColor","_getDecoratedPrefix","opts","prefix","prefixColor","_prepareOutput","parse","text","concat","styles","slice","_isPrefixAlreadyInUse","_getInstanceByPrefix","_normalizeOpts","state","_getInitialState","_decorateLoggerMethods","_instances","transports","RegExp","some","TypeError","Boolean","plaintext","isEnabled","_getEnableState","test","keys","arguments","instance","level","args","msg","Array","renderer","_","x","match","u","tag","pop","indexOf","g","document","documentElement","style","navigator","userAgent","self","global","getGlobal","ob","pb","qb","Function","eval","testsContext","webpackContext","req","id","webpackContextResolve","Error","code","beforeAll","jasmine","DEFAULT_TIMEOUT_INTERVAL","describe","it","isLocked","add","async","businessLogic","createSpy","and","returnValue","fail","expect","toBe","calls","count","isPending","LOW","HIGH","dog","cat","last","results","all","unlock","param","isNaN","catch","promise3","zebra","ape","second"],"mappings":"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","file":"priority-queue.test.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./Item\"), exports);\n__exportStar(require(\"./Priority\"), exports);\n__exportStar(require(\"./PriorityQueue\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Priority = void 0;\nvar Priority;\n(function (Priority) {\n    Priority[Priority[\"LOW\"] = 0] = \"LOW\";\n    Priority[Priority[\"MEDIUM\"] = 5] = \"MEDIUM\";\n    Priority[Priority[\"HIGH\"] = 9] = \"HIGH\";\n})(Priority = exports.Priority || (exports.Priority = {}));\n//# sourceMappingURL=Priority.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Item = void 0;\nconst Priority_1 = require(\"./Priority\");\nclass Item {\n    constructor() {\n        /** original business logic */\n        this.fn = () => { };\n        this.priority = Priority_1.Priority.MEDIUM;\n        /** wrapped `reject` of `fn` */\n        this.reject = () => { };\n        /** wrapped `resolve` of `fn` */\n        this.resolve = () => { };\n        /** number of remaining retries for rejecting Promises */\n        this.retry = Infinity;\n        /** time when the item has been added to the queue */\n        this.timestamp = 0;\n    }\n    toString() {\n        return `\n    label=${this.label},\n    priority=${this.priority},\n    timestamp=${this.timestamp},\n    retry=${this.retry},\n    fn=${this.fn.toString().replace(/(\\r\\n|\\n|\\r|\\s+)/gm, ' ')},`;\n    }\n}\nexports.Item = Item;\n//# sourceMappingURL=Item.js.map","\"use strict\";\n/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PriorityQueue = void 0;\nconst logdown_1 = __importDefault(require(\"logdown\"));\nconst Item_1 = require(\"./Item\");\nconst Priority_1 = require(\"./Priority\");\nclass PriorityQueue {\n    constructor(config) {\n        this.logger = logdown_1.default('@wireapp/priority-queue/PriorityQueue', {\n            logger: console,\n            markdown: false,\n        });\n        this.config = {\n            comparator: (a, b) => {\n                if (a.priority === b.priority) {\n                    return a.timestamp - b.timestamp;\n                }\n                return b.priority - a.priority;\n            },\n            maxRetries: 0,\n            maxRetryDelay: Number.MAX_SAFE_INTEGER,\n            retryDelay: 1000,\n            retryGrowthFactor: 1.3,\n        };\n        this.isRunning = false;\n        this.queue = [];\n        this.config = Object.assign(Object.assign({}, this.config), config);\n    }\n    add(thunkedPromise, priority = Priority_1.Priority.MEDIUM, label) {\n        return new Promise((resolve, reject) => {\n            const queueObject = new Item_1.Item();\n            queueObject.fn = thunkedPromise;\n            queueObject.label = label;\n            queueObject.priority = priority;\n            queueObject.reject = reject;\n            queueObject.resolve = resolve;\n            queueObject.retry = 0;\n            queueObject.timestamp = Date.now() + this.size;\n            this.queue.push(queueObject);\n            this.queue.sort(this.config.comparator);\n            if (!this.isRunning) {\n                this.isRunning = true;\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                this.processList();\n            }\n        });\n    }\n    delete(label) {\n        this.queue = this.queue.filter(item => item.label !== label);\n    }\n    deleteAll() {\n        this.queue = [];\n    }\n    get all() {\n        return this.queue;\n    }\n    get first() {\n        return this.queue[0];\n    }\n    get last() {\n        return this.queue[this.queue.length - 1];\n    }\n    get size() {\n        return this.queue.length;\n    }\n    processList() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queueObject = this.first;\n            if (!queueObject) {\n                this.isRunning = false;\n                return;\n            }\n            try {\n                queueObject.resolve(yield queueObject.fn());\n                this.queue.shift();\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                this.processList();\n            }\n            catch (error) {\n                if (queueObject.retry >= this.config.maxRetries) {\n                    this.queue.shift();\n                    queueObject.reject(error);\n                    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                    this.processList();\n                }\n                else {\n                    this.logger.log(`Retrying item \"${queueObject}\"`);\n                    setTimeout(() => this.processList(), this.getGrowingDelay(queueObject.retry));\n                    queueObject.retry++;\n                }\n            }\n        });\n    }\n    getGrowingDelay(currentRetry) {\n        const delay = currentRetry < 1 ? this.config.retryDelay : this.config.retryDelay * currentRetry * this.config.retryGrowthFactor;\n        return Math.min(delay, this.config.maxRetryDelay);\n    }\n    toString() {\n        return this.queue\n            .map((item, index) => {\n            return `\"${index}\": ${item.toString()}`;\n        })\n            .join('\\r\\n');\n    }\n}\nexports.PriorityQueue = PriorityQueue;\n//# sourceMappingURL=PriorityQueue.js.map","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.logdown=e():t.logdown=e()}(window,function(){return function(r){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=r,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,\"a\",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=\"\",o(o.s=0)}([function(t,e,r){var n,o=r(1)(),i=r(3),s=r(5),f=r(8)();o.prefixColors=[\"#F2777A\",\"#F99157\",\"#FFCC66\",\"#99CC99\",\"#66CCCC\",\"#6699CC\",\"#CC99CC\"],o._setPrefixRegExps=function(){try{f.localStorage&&\"string\"==typeof f.localStorage.getItem(\"debug\")&&(o._prefixRegExps=[],f.localStorage.getItem(\"debug\").split(\",\").forEach(function(t){var e=\"enable\";\"-\"===(t=t.trim())[0]&&(t=t.substr(1),e=\"disable\");var r=o._prepareRegExpForPrefixSearch(t);o._prefixRegExps.push({type:e,regExp:r})}))}catch(t){}},o._getNextPrefixColor=(n=0,function(){return n+=1,o.prefixColors[n%o.prefixColors.length]}),o.prototype._getDecoratedPrefix=function(){var t=[];return s()?(t.push(\"%c\"+this.opts.prefix+\"%c \"),t.push(\"color:\"+this.opts.prefixColor+\"; font-weight:bold;\",\"\")):t.push(\"[\"+this.opts.prefix+\"] \"),t},o.prototype._prepareOutput=function(t){var e,r=this._getDecoratedPrefix();return\"string\"==typeof t[0]?this.opts.markdown&&s()?(e=i.parse(t[0]),r[0]=r[0]+e.text,r=r.concat(e.styles)):r[0]=r[0]+t[0]:r.push(t[0]),1<t.length&&(r=r.concat(t.slice(1))),r},o._setPrefixRegExps(),t.exports=o},function(t,e,r){var f=r(2);t.exports=function(){function s(t,e){return this instanceof s?s._isPrefixAlreadyInUse(t)?s._getInstanceByPrefix(t):(this.opts=s._normalizeOpts(t,e),this.state=s._getInitialState(this.opts),s._decorateLoggerMethods(this),s._instances.push(this),this):new s(t,e)}return s.transports=[],s._instances=[],s._prefixRegExps=[],s._prepareRegExpForPrefixSearch=function(t){return new RegExp(\"^\"+t.replace(/\\*/g,\".*?\")+\"$\")},s._isPrefixAlreadyInUse=function(e){return s._instances.some(function(t){return t.opts.prefix===e})},s._getInstanceByPrefix=function(e){return s._instances.filter(function(t){return t.opts.prefix===e})[0]},s._normalizeOpts=function(t,e){if(\"string\"!=typeof t)throw new TypeError(\"prefix must be a string\");var r=void 0===(e=e||{}).markdown||Boolean(e.markdown),n=e.prefixColor||s._getNextPrefixColor();return{logger:e.logger||console,markdown:r,plaintext:Boolean(e.plaintext),prefix:t,prefixColor:n}},s._getInitialState=function(t){return{isEnabled:s._getEnableState(t)}},s._getEnableState=function(e){var r=!1;return s._prefixRegExps.forEach(function(t){\"enable\"===t.type&&t.regExp.test(e.prefix)?r=!0:\"disable\"===t.type&&t.regExp.test(e.prefix)&&(r=!1)}),r},s._decorateLoggerMethods=function(t){var i=t.opts.logger,e=Object.keys(i).filter(function(t){return\"function\"==typeof i[t]});0===e.length&&(e=[\"debug\",\"log\",\"warn\",\"error\",\"info\"]),e.forEach(function(o){t[o]=function(){var e=f(arguments),r=this.opts.prefix;if(s.transports.length){var n=\"[\"+r+\"] \"+e.filter(function(t){return\"object\"!=typeof t}).join(\" \");s.transports.forEach(function(t){t({state:this.state,instance:r,level:o,args:e,msg:n})}.bind(this))}if(this.state.isEnabled){var t=this._prepareOutput(e,o);i[o].apply(i,t)}}})},s}},function(t,e){t.exports=function(t){return Array.prototype.slice.call(t,0)}},function(t,e,r){var n=[];function o(e){return function(t){return n.push(e),n.push(\"\"),\"%c\"+t+\"%c\"}}var i=new(r(4))({renderer:{\"*\":o(\"font-weight:bold;\"),_:o(\"font-style:italic;\"),\"`\":o(\"background-color:rgba(255,204,102, 0.1);color:#FFCC66;padding:2px 5px;border-radius:2px;\")}});t.exports={parse:function(t){var e={text:i.parse(t),styles:[].concat(n)};return n.length=0,e}}},function(t,e){var x=/([_*`\\\\]|[^_*`\\\\]+)/g,r=/[_*`]/;function n(t){this.renderer=t.renderer}function d(t){return r.test(t)}n.prototype.parse=function(t){if(\"\"===t)return\"\";var r,e,n,o=t.match(x),i=this.renderer,s=\"\",f=[],u={},a=0;function p(t){for(var e=\"\";r&&r.tag!==t;)e=r.tag+r.text+e,u[r.tag]=!1,r=f.pop();return e}for(;n=o[a];){if(e=\"\",a++,d(n))if(u[n])e=p(n),e=i[r.tag](r.text+e),u[n]=!1,r=f.pop();else{var c=\"\";if(\"`\"===n){var l=o.indexOf(n,a);-1!==l&&(s+=p(),c=o.slice(a,l).join(\"\"),a=l)}r&&f.push(r),u[n]=!0,r={tag:n,text:c}}else if(\"\\\\\"===(e=n)){var g=o[a];(d(g)||\"\\\\\"===g)&&(e=g,a++)}e&&(r?r.text+=e:s+=e,e=\"\")}return s+p()},t.exports=n},function(t,e,r){var n=r(6),o=r(7);t.exports=function(){return n()||o()}},function(t,e){t.exports=function(){try{return\"WebkitAppearance\"in document.documentElement.style&&!/Edge/.test(navigator.userAgent)}catch(t){return!1}}},function(t,e){t.exports=function(){try{return/firefox\\/(\\d+)/i.test(navigator.userAgent)}catch(t){return!1}}},function(r,t,e){(function(t){function e(t,e){return\"object\"==typeof t&&t.self===t&&t||\"object\"==typeof e&&e.global===e&&e||this}r.exports=e.bind(this,self,t),r.exports.getGlobal=e}).call(this,e(9))},function(ob,pb){var qb;qb=function(){return this}();try{qb=qb||Function(\"return this\")()||eval(\"this\")}catch(ob){\"object\"==typeof window&&(qb=window)}ob.exports=qb}])});\n","/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\n\n// traverse all test files for webpack dependency resolution\nconst testsContext = require.context('./', true, /test\\.js$/);\ntestsContext.keys().forEach(testsContext);\n","var map = {\n\t\"./PriorityQueue.test.js\": 7\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 6;","/*\n * Wire\n * Copyright (C) 2018 Wire Swiss GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see http://www.gnu.org/licenses/.\n *\n */\n\n/* eslint-disable no-magic-numbers */\n\nimport {Priority, PriorityQueue} from '@wireapp/priority-queue';\n\nbeforeAll(() => (jasmine.DEFAULT_TIMEOUT_INTERVAL = 10000));\n\ndescribe('PriorityQueue', () => {\n  describe('\"constructor\"', () => {\n    it('supports a custom retry delay of 3 seconds', done => {\n      let isLocked = true;\n\n      const businessLogic = () => {\n        return new Promise((resolve, reject) => {\n          if (isLocked) {\n            reject(new Error('Promise is locked.'));\n          } else {\n            resolve('Promise successfully executed.');\n            done();\n          }\n        });\n      };\n\n      setTimeout(() => (isLocked = false), 1500);\n      const queue = new PriorityQueue({maxRetries: Infinity, retryDelay: 3000});\n      queue.add(businessLogic);\n    });\n\n    it('supports limiting the amount of retries', async () => {\n      const businessLogic = jasmine.createSpy().and.returnValue(Promise.reject(new Error('Error')));\n      const queue = new PriorityQueue({maxRetries: 1});\n      try {\n        await queue.add(businessLogic);\n        fail();\n      } catch (error) {\n        expect(queue.size).toBe(0);\n        expect(businessLogic.calls.count()).toBe(2);\n      }\n    });\n  });\n\n  describe('\"add\"', () => {\n    it('adds objects', () => {\n      const queue = new PriorityQueue();\n      queue.isPending = true;\n\n      queue.add(() => 'ape');\n      queue.add(() => 'cat');\n      queue.add(() => 'dog');\n      queue.add(() => 'zebra');\n\n      expect(queue.size).toBe(4);\n    });\n\n    it('adds objects with priorities', async () => {\n      const queue = new PriorityQueue();\n      queue.isPending = true;\n\n      queue.add(() => 'ape');\n      queue.add(() => 'cat', Priority.LOW);\n      queue.add(() => 'dog', Priority.HIGH);\n      queue.add(() => 'zebra');\n\n      const dog = await queue.first.fn();\n      expect(dog).toBe('dog');\n      const cat = await queue.last.fn();\n      expect(cat).toBe('cat');\n    });\n\n    it('works with thunked Promises', async () => {\n      const queue = new PriorityQueue();\n\n      const results = await Promise.all([\n        queue.add(() => Promise.resolve('ape')),\n        queue.add(() => Promise.resolve('cat')),\n        queue.add(() => Promise.resolve('dog')),\n        queue.add(() => Promise.resolve('zebra')),\n      ]);\n\n      expect(results[0]).toBe('ape');\n      expect(results[1]).toBe('cat');\n      expect(results[2]).toBe('dog');\n      expect(results[3]).toBe('zebra');\n    });\n  });\n\n  describe('\"run\"', () => {\n    it('executes an item from the queue', done => {\n      const queue = new PriorityQueue();\n      const ape = () => Promise.resolve('ape').then(done());\n\n      queue.add(ape);\n      queue.add(() => 'cat');\n      queue.add(() => 'dog');\n      queue.add(() => 'zebra');\n    });\n\n    it('executes an item from the queue with different priorities', done => {\n      const queue = new PriorityQueue();\n\n      const promise1 = () =>\n        Promise.resolve('one').then(item => {\n          expect(item).toBe('one');\n          return 'one';\n        });\n\n      const promise2 = () =>\n        Promise.resolve('two').then(item => {\n          expect(item).toBe('two');\n          return 'two';\n        });\n\n      const promise3 = () =>\n        Promise.resolve('three').then(item => {\n          expect(item).toBe('three');\n          done();\n        });\n\n      queue.add(promise1, Priority.HIGH);\n      queue.add(promise2, Priority.MEDIUM);\n      queue.add(promise3, Priority.LOW);\n    });\n\n    it('retries on error until the error gets resolved', done => {\n      let isLocked = true;\n\n      const businessLogic = () => {\n        return new Promise((resolve, reject) => {\n          if (isLocked) {\n            reject(new Error('Promise is locked.'));\n          } else {\n            resolve('Promise successfully executed.');\n            done();\n          }\n        });\n      };\n\n      const unlock = () => {\n        return new Promise(resolve => {\n          isLocked = false;\n          resolve();\n        });\n      };\n\n      const queue = new PriorityQueue({maxRetries: Infinity});\n      queue.add(businessLogic);\n      setTimeout(() => queue.add(unlock, Priority.HIGH), 200);\n    });\n\n    it('works with error-catching Promises', done => {\n      const queue = new PriorityQueue();\n\n      function businessLogic(param) {\n        return new Promise((resolve, reject) => {\n          if (isNaN(param)) {\n            reject(new TypeError('Not a Number'));\n          } else {\n            resolve(param);\n          }\n        });\n      }\n\n      const promise1 = () =>\n        businessLogic('A')\n          .catch(() => businessLogic(42))\n          .then(item => expect(item).toBe(42));\n      const promise2 = () => Promise.resolve('two').then(item => expect(item).toBe('two'));\n      const promise3 = () => Promise.resolve('three').then(() => done());\n\n      queue.add(promise1, Priority.HIGH);\n      queue.add(promise2, Priority.MEDIUM);\n      queue.add(promise3, Priority.LOW);\n    });\n\n    it('executes a high priority element prior to other running elements ', done => {\n      const queue = new PriorityQueue();\n\n      const promise1 = () => Promise.resolve('one').then(item => expect(item).toBe('one'));\n      const promise2 = () => Promise.reject(new Error('two'));\n      const promise3 = () =>\n        Promise.resolve('three').then(item => {\n          expect(item).toBe('three');\n          done();\n        });\n\n      queue.add(promise1);\n      queue.add(promise2);\n\n      setTimeout(() => queue.add(promise3, Priority.HIGH), 1000);\n    });\n  });\n\n  describe('\"size\"', () => {\n    it('returns the size of the items left after Promise execution', done => {\n      let isLocked = true;\n\n      const businessLogic = () => {\n        return new Promise((resolve, reject) => {\n          if (isLocked) {\n            reject(new Error('Promise is locked.'));\n          } else {\n            resolve('Promise successfully executed.');\n          }\n        });\n      };\n\n      const unlock = () => {\n        return new Promise(resolve => {\n          isLocked = false;\n          resolve();\n        });\n      };\n\n      const queue = new PriorityQueue({maxRetries: Infinity, retryDelay: 100});\n      setTimeout(() => queue.add(unlock, Priority.HIGH), 1000);\n      queue.add(businessLogic).then(() => {\n        expect(queue.size).toBe(0);\n        done();\n      });\n    });\n  });\n\n  describe('\"comparator\"', () => {\n    it('uses a descending priority order by default', async () => {\n      const queue = new PriorityQueue();\n      // prevents item processing\n      queue.isRunning = true;\n\n      queue.add(() => 'ape', Priority.HIGH);\n      queue.add(() => 'cat');\n      queue.add(() => 'dog');\n      queue.add(() => 'zebra', Priority.LOW);\n\n      const zebra = await queue.last.fn();\n      expect(zebra).toBe('zebra');\n      const ape = await queue.first.fn();\n      expect(ape).toBe('ape');\n    });\n\n    it('supports a custom comparator', async () => {\n      const ascendingPriority = (first, second) => first.priority - second.priority;\n      const queue = new PriorityQueue({comparator: ascendingPriority});\n      // prevents item processing\n      queue.isRunning = true;\n\n      queue.add(() => 'ape', Priority.HIGH);\n      queue.add(() => 'cat');\n      queue.add(() => 'dog');\n      queue.add(() => 'zebra', Priority.LOW);\n\n      const zebra = await queue.first.fn();\n      expect(zebra).toBe('zebra');\n      const ape = await queue.last.fn();\n      expect(ape).toBe('ape');\n    });\n\n    it('continues after the maximum amount of retries', done => {\n      const queue = new PriorityQueue({maxRetries: 3});\n\n      const promise1 = () =>\n        Promise.resolve('one').then(item => {\n          expect(item).toBe('one');\n          return 'one';\n        });\n\n      const promise2 = () =>\n        Promise.reject(new Error('two')).then(item => {\n          expect(item).toBe('two');\n          return 'two';\n        });\n\n      const promise3 = () =>\n        Promise.resolve('three').then(item => {\n          expect(item).toBe('three');\n          done();\n        });\n\n      queue.add(promise1);\n      queue.add(promise2);\n\n      setTimeout(() => queue.add(promise3), 1000);\n    });\n  });\n});\n"],"sourceRoot":""}