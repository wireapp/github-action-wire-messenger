var PriorityQueue=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=0)}([function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(2)),n(r(1)),n(r(3))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=5]="MEDIUM",t[t.HIGH=9]="HIGH"}(e.Priority||(e.Priority={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1);e.Item=class{constructor(){this.fn=()=>{},this.priority=n.Priority.MEDIUM,this.reject=()=>{},this.resolve=()=>{},this.retry=1/0,this.timestamp=0}toString(){return`\n    label=${this.label},\n    priority=${this.priority},\n    timestamp=${this.timestamp},\n    retry=${this.retry},\n    fn=${this.fn.toString().replace(/(\r\n|\n|\r|\s+)/gm," ")},`}}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(r(4)),s=r(2),u=r(1);e.PriorityQueue=class{constructor(t){this.logger=o.default("@wireapp/priority-queue/PriorityQueue",{logger:console,markdown:!1}),this.config={comparator:(t,e)=>t.priority===e.priority?t.timestamp-e.timestamp:e.priority-t.priority,maxRetries:0,maxRetryDelay:Number.MAX_SAFE_INTEGER,retryDelay:1e3,retryGrowthFactor:1.3},this.isRunning=!1,this.queue=[],this.config=Object.assign(Object.assign({},this.config),t)}add(t,e=u.Priority.MEDIUM,r){return new Promise((n,i)=>{const o=new s.Item;o.fn=t,o.label=r,o.priority=e,o.reject=i,o.resolve=n,o.retry=0,o.timestamp=Date.now()+this.size,this.queue.push(o),this.queue.sort(this.config.comparator),this.isRunning||(this.isRunning=!0,this.processList())})}delete(t){this.queue=this.queue.filter(e=>e.label!==t)}deleteAll(){this.queue=[]}get all(){return this.queue}get first(){return this.queue[0]}get last(){return this.queue[this.queue.length-1]}get size(){return this.queue.length}processList(){return n(this,void 0,void 0,(function*(){const t=this.first;if(t)try{t.resolve(yield t.fn()),this.queue.shift(),this.processList()}catch(e){t.retry>=this.config.maxRetries?(this.queue.shift(),t.reject(e),this.processList()):(this.logger.log(`Retrying item "${t}"`),setTimeout(()=>this.processList(),this.getGrowingDelay(t.retry)),t.retry++)}else this.isRunning=!1}))}getGrowingDelay(t){const e=t<1?this.config.retryDelay:this.config.retryDelay*t*this.config.retryGrowthFactor;return Math.min(e,this.config.maxRetryDelay)}toString(){return this.queue.map((t,e)=>`"${e}": ${t.toString()}`).join("\r\n")}}},function(module,exports,__webpack_require__){var e;window,e=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){var n,i=r(1)(),o=r(3),s=r(5),u=r(8)();i.prefixColors=["#F2777A","#F99157","#FFCC66","#99CC99","#66CCCC","#6699CC","#CC99CC"],i._setPrefixRegExps=function(){try{u.localStorage&&"string"==typeof u.localStorage.getItem("debug")&&(i._prefixRegExps=[],u.localStorage.getItem("debug").split(",").forEach((function(t){var e="enable";"-"===(t=t.trim())[0]&&(t=t.substr(1),e="disable");var r=i._prepareRegExpForPrefixSearch(t);i._prefixRegExps.push({type:e,regExp:r})})))}catch(t){}},i._getNextPrefixColor=(n=0,function(){return n+=1,i.prefixColors[n%i.prefixColors.length]}),i.prototype._getDecoratedPrefix=function(){var t=[];return s()?(t.push("%c"+this.opts.prefix+"%c "),t.push("color:"+this.opts.prefixColor+"; font-weight:bold;","")):t.push("["+this.opts.prefix+"] "),t},i.prototype._prepareOutput=function(t){var e,r=this._getDecoratedPrefix();return"string"==typeof t[0]?this.opts.markdown&&s()?(e=o.parse(t[0]),r[0]=r[0]+e.text,r=r.concat(e.styles)):r[0]=r[0]+t[0]:r.push(t[0]),1<t.length&&(r=r.concat(t.slice(1))),r},i._setPrefixRegExps(),t.exports=i},function(t,e,r){var n=r(2);t.exports=function(){function t(e,r){return this instanceof t?t._isPrefixAlreadyInUse(e)?t._getInstanceByPrefix(e):(this.opts=t._normalizeOpts(e,r),this.state=t._getInitialState(this.opts),t._decorateLoggerMethods(this),t._instances.push(this),this):new t(e,r)}return t.transports=[],t._instances=[],t._prefixRegExps=[],t._prepareRegExpForPrefixSearch=function(t){return new RegExp("^"+t.replace(/\*/g,".*?")+"$")},t._isPrefixAlreadyInUse=function(e){return t._instances.some((function(t){return t.opts.prefix===e}))},t._getInstanceByPrefix=function(e){return t._instances.filter((function(t){return t.opts.prefix===e}))[0]},t._normalizeOpts=function(e,r){if("string"!=typeof e)throw new TypeError("prefix must be a string");var n=void 0===(r=r||{}).markdown||Boolean(r.markdown),i=r.prefixColor||t._getNextPrefixColor();return{logger:r.logger||console,markdown:n,plaintext:Boolean(r.plaintext),prefix:e,prefixColor:i}},t._getInitialState=function(e){return{isEnabled:t._getEnableState(e)}},t._getEnableState=function(e){var r=!1;return t._prefixRegExps.forEach((function(t){"enable"===t.type&&t.regExp.test(e.prefix)?r=!0:"disable"===t.type&&t.regExp.test(e.prefix)&&(r=!1)})),r},t._decorateLoggerMethods=function(e){var r=e.opts.logger,i=Object.keys(r).filter((function(t){return"function"==typeof r[t]}));0===i.length&&(i=["debug","log","warn","error","info"]),i.forEach((function(i){e[i]=function(){var e=n(arguments),o=this.opts.prefix;if(t.transports.length){var s="["+o+"] "+e.filter((function(t){return"object"!=typeof t})).join(" ");t.transports.forEach(function(t){t({state:this.state,instance:o,level:i,args:e,msg:s})}.bind(this))}if(this.state.isEnabled){var u=this._prepareOutput(e,i);r[i].apply(r,u)}}}))},t}},function(t,e){t.exports=function(t){return Array.prototype.slice.call(t,0)}},function(t,e,r){var n=[];function i(t){return function(e){return n.push(t),n.push(""),"%c"+e+"%c"}}var o=new(r(4))({renderer:{"*":i("font-weight:bold;"),_:i("font-style:italic;"),"`":i("background-color:rgba(255,204,102, 0.1);color:#FFCC66;padding:2px 5px;border-radius:2px;")}});t.exports={parse:function(t){var e={text:o.parse(t),styles:[].concat(n)};return n.length=0,e}}},function(t,e){var r=/([_*`\\]|[^_*`\\]+)/g,n=/[_*`]/;function i(t){this.renderer=t.renderer}function o(t){return n.test(t)}i.prototype.parse=function(t){var e,n,i,s=t.match(r),u=this.renderer,a="",c=[],f={},p=0;function l(t){for(var r="";e&&e.tag!==t;)r=e.tag+e.text+r,f[e.tag]=!1,e=c.pop();return r}for(;i=s[p];){if(n="",p++,o(i))if(f[i])n=l(i),n=u[e.tag](e.text+n),f[i]=!1,e=c.pop();else{var h="";if("`"===i){var g=s.indexOf(i,p);-1!==g&&(a+=l(),h=s.slice(p,g).join(""),p=g)}e&&c.push(e),f[i]=!0,e={tag:i,text:h}}else if("\\"===(n=i)){var y=s[p];(o(y)||"\\"===y)&&(n=y,p++)}n&&(e?e.text+=n:a+=n,n="")}return a+l()},t.exports=i},function(t,e,r){var n=r(6),i=r(7);t.exports=function(){return n()||i()}},function(t,e){t.exports=function(){try{return"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent)}catch(t){return!1}}},function(t,e){t.exports=function(){try{return/firefox\/(\d+)/i.test(navigator.userAgent)}catch(t){return!1}}},function(t,e,r){(function(e){function r(t,e){return"object"==typeof t&&t.self===t&&t||"object"==typeof e&&e.global===e&&e||this}t.exports=r.bind(this,self,e),t.exports.getGlobal=r}).call(this,r(9))},function(ob,pb){var qb;qb=function(){return this}();try{qb=qb||Function("return this")()||eval("this")}catch(ob){"object"==typeof window&&(qb=window)}ob.exports=qb}])},module.exports=e()}]);
//# sourceMappingURL=priority-queue.bundle.js.map